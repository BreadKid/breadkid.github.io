{"pages":[{"title":"About me","text":"About this siteBegining with wordpress based on AWS EC2Then migrate to gitpage and hexo, use â€˜nexTâ€™ theme Mainly in writing notes About meGet salary by JavaInterested in Respberry Pi, funny script, open source technology,Live in Shanghai About my Wechat subscription accountPush some notes and daily life story. If you have interests, thank you for your following.","link":"/about/me.html"},{"title":"å´å…ˆæ£®çš„***æ‹çˆ±é€šå…³***æˆå°±åˆ—è¡¨","text":"B with UI love all of u 2017.3.27 #è¾¾æˆç›¸è¯†æˆå°±# 2017.3.27 #è¾¾æˆé€ç¤¼ç‰©ğŸæˆå°±# 2017.4.19 #è¾¾æˆè¡¨ç™½æˆå°±# 2017.4.22 #è¾¾æˆpapapaâ¤ï¸æˆå°±# 2017.4.27 #è¾¾æˆé™ªä¼´ç”Ÿæ—¥ğŸ‚æˆå°±# 2017.5.20 #è¾¾æˆå…±åº¦520æˆå°±# 2017.5.30 #è¾¾æˆé€ç²½å­æˆå°±# 2017.6.1 #è¾¾æˆä¹°è¡£æœğŸ‘”æˆå°±# 2017.6.3 #è¾¾æˆå‹é©¬è·¯3å…¬é‡ŒğŸš¶â€â™€ï¸ğŸš¶æˆå°±# 2017.6.10 #è¾¾æˆå®‰æ…°æˆå°±# 2017.6.11 #è¾¾æˆç§è‰æˆå°±# 2017.7.28 #è¾¾æˆ100å¤©æˆå°±# 2017.8.12 #è¾¾æˆå•æ‰‹è§£é”ğŸ‘™æˆå°±# 2017.8.28 #è¾¾æˆä¸ƒå¤•é€èŠ±ğŸŒ¹æˆå°±# 2017.9.6 #è¾¾æˆé€æœˆé¥¼ğŸŒ›æˆå°±# 2017.9.8 #è¾¾æˆè¿ç»­å››å¤©çº¦ä¼šæˆå°±# 2017.9.16 #è¾¾æˆåˆ é™¤exæˆå°±# 2017.9.16 #è¾¾æˆåˆ’èˆ¹â›µï¸æˆå°±# 2017.10.6 #è¾¾æˆå¤§æ‰«é™¤æˆå°±# 2017.10.8 #è¾¾æˆè§é—ºèœœæˆå°±# 2017.10.14 #è¾¾æˆé€è›‹ç³•æˆå°±# 2017.10.14 #è¾¾æˆç™»é«˜100æ¥¼æˆå°±# 2017.10.14 #è¾¾æˆåƒå¤§èƒèŸ¹ğŸ¦€ï¸æˆå°±# 2017.10.14 #è¾¾æˆé€æƒ…ä¹¦ğŸ’Œæˆå°±# 2017.10.22 #è¾¾æˆåœ°æ–¹é¢†å¯¼ä¼šæ™¤æˆå°±# 2017.11.4 #è¾¾æˆçƒ¹é¥ªç¾å‘³ç•ªèŒ„æ„é¢ğŸæˆå°±# 2017.11.4 #è¾¾æˆå¤ªé¼“è¾¾äººå’šå’šå’šæˆå°±# 2017.11.11 #è¾¾æˆåˆ¶ä½œå¤±è´¥è¾£è‚‰é¢ğŸœæˆå°±# 2017.11.14 #è¾¾æˆé¼“åŠ±å·¥ä½œæˆå°±# 2017.11.18 #è¾¾æˆå®¶åº­ç«é”…ğŸ²æˆå°±# 2017.11.25 #è¾¾æˆå‡ºå¸­å©šç¤¼ğŸ’’æˆå°±# 2017.11.30 #è¾¾æˆè§å®å®å®¶é•¿æˆå°±ï¼Œé¡ºä¾¿è·å–äº†çº¢åŒ…# 2017.12.2 #è¾¾æˆåŸéšåº™æ±¤åŒ…æˆå°±# 2017.12.8 #è¾¾æˆé€›å•†åœºæˆå°±# 2017.12.9 #è¾¾æˆè‡ªåˆ¶ç‰›æ’&amp;ç½—å®‹æ±¤æˆå°±# 2017.12.16 #è¾¾æˆæ¯›è„šå¥³å©¿ä¸Šé—¨æˆå°±# 2018.1.21 #è¾¾æˆçœ‹æœ›BobbiğŸ¦”æˆå°±ï¼Œå¹¶ä¸Šé—¨åƒé¥­# 2018.2.08 #è¾¾æˆä¸ºäº†æƒ…äººèŠ‚è¯·å‡æˆå°±# 2018.2.14 #è¾¾æˆå…±æ¸¡æƒ…äººèŠ‚æˆå°±# 2018.2.17 #è¾¾æˆå®å®æ˜¥èŠ‚ä¸Šé—¨æˆå°±# 2018.2.17 #è¾¾æˆå¤§å¤´è´´æˆå°±# 2018.2.20 #è¾¾æˆæˆ‘æ˜¥èŠ‚ä¸Šé—¨æˆå°±ï¼Œé¡ºä¾¿è·å–çº¢åŒ…# 2018.3.10 #è¾¾æˆåˆ¶ä½œè›‹é¥¼ğŸ¥æˆå°±# 2018.3.31 #è¾¾æˆç»™BobbiğŸ¦”æ´—æ¾¡æˆå°±# 2018.3.31 #è¾¾æˆé€›å¤çŒ—å›­æˆå°±# 2018.3.31 #è¾¾æˆåƒå°ç¬¼åŒ…æˆå°±# 2018.4.19 #è¾¾æˆä¸€å‘¨å¹´æˆå°±# 2018.4.27 #è¾¾æˆå…±æ¸¡å´å…ˆæ£®30å²ç”Ÿæ—¥ğŸ‚æˆå°±# 2018.4.30 #è¾¾æˆç»™BobbiğŸ¦”æ¢æ–°å®¶æˆå°±# 2018.5.5 #è¾¾æˆé€æ„Ÿå†’è¯æˆå°±# 2018.5.5 #è¾¾æˆé¦–æ¬¡å¤–å‡ºç«é”…ğŸ²æˆå°±# 2018.5.5 #è¾¾æˆé¦–æ¬¡åˆå”±ğŸ¤æˆå°±# 2018.7.14 #è¾¾æˆéŸ³ä¹å…å½©è™¹åˆå”±å›¢æˆå°±# 2018.7.20 #è¾¾æˆè·å¾—ç¾ä¸½å‘å¤¹æˆå°±# 2018.7.28 #è¾¾æˆåƒå“ˆæ ¹è¾¾æ–¯ğŸ¦æˆå°±# 2018.7.28 #è¾¾æˆé€è‰å¸½æˆå°±# 2018.8.5 #è¾¾æˆé€›China Joyæˆå°±# 2018.8.5 #è¾¾æˆç¬¬ä¸€æ¬¡ä¸¢å¤±ç¤¼ç‰©æˆå°±# 2018.8.8 #è¾¾æˆä½ç½®å…±äº«ç”œèœœæˆå°±# 2018.8.11 #è¾¾æˆäººè‚‰å¿«é€’çˆ±å¿ƒåŸå‘³é¸¡æˆå°±# 2018.8.18 #è¾¾æˆè¡¥è¿‡ä¸ƒå¤•ğŸæˆå°±# 2018.8.18 #è¾¾æˆé€é¡¹é“¾æˆå°±# 2018.8.18 #è¾¾æˆé€›ä¹¦å±•ğŸ“–æˆå°±# 2018.9.1 #è¾¾æˆ500å¤©æˆå°±# 2018.9.8 #è¾¾æˆåŒæ–¹å®¶é•¿æ­£å¼ä¼šæ™¤æˆå°±# 2018.10.28 #è¾¾æˆè£…ä¿®æ–°æˆ¿ğŸ æˆå°±# 2018.11.11 #è¾¾æˆåŒåä¸€å¤§é¢ä¹°ä¹°ä¹°æˆå°±# 2018.11.24 #è¾¾æˆé¢œå°„æˆå°±# 2018.12.9 #è¾¾æˆå†¬æ—¥é€ä¹¦ğŸ“–æˆå°±# 2018.12.22 #è¾¾æˆåƒ100æ ·æ²¡æœ‰çš„å¿…èƒœå®¢ğŸ•æˆå°±# 2018.12.30 #è¾¾æˆé›ªä¸­â„ï¸æ¼«æ­¥æˆå°±# 2019.01.02 #è¾¾æˆä¸‹ç­åœ°é“å¶é‡æˆå°±# 2019.01.26 #è¾¾æˆä¸€èµ·åŒ…å–œç³–æˆå°±# 2019.02.05 #è¾¾æˆä¸€èµ·æ‹¼ä¹é«˜æˆå°±# 2019.02.14 #è¾¾æˆæ±‚å©šğŸ’æˆå°±# 2019.03.16 #è¾¾æˆå©šç¤¼ğŸ’’æˆå°±# 2019.03.17 #è¾¾æˆå›é—¨ğŸ æˆå°±# 2019.03.23 #è¾¾æˆæ¬å®¶æˆå°±# 2019.03.24 #è¾¾æˆBobbiğŸ¦”æ¬å®¶æˆå°±# 2019.09.09 #è¾¾æˆç»“å©šæˆå°±#","link":"/coderwu/index.html"},{"title":"å¤–å…¬","text":"æ´»åˆ°ç°åœ¨ç¬¬ä¸€æ¬¡èº«è¾¹æœ‰äº²äººå»ä¸–ï¼Œæˆ‘çš„å¤–å…¬åœ¨2020å¹´4æœˆ14æ—¥5ç‚¹13åˆ†å®‰è¯¦åœ°èµ°äº†ã€‚ æœ›ç€æˆ‘å¦ˆå‘æ¥çš„æ¶ˆæ¯è€åŠå¤©ï¼Œé…é…¿å‡ºä¸€æ»´æ³ªï¼Œå†…å¿ƒè¿˜æ˜¯å¹³é™çš„ã€‚ å°æ—¶å€™æ¯å‘¨æœ«éƒ½è¦å’Œå¦ˆå¦ˆå›å¨˜å®¶ï¼Œæˆ‘å‡ºç”Ÿå‰å¤–å…¬å°±ä¸€ä¸ªäººäº†ï¼Œæ¯æ¬¡å»ä»–å®¶éƒ½ä¼šæ•™æˆ‘æŠ˜çº¸ï¼Œä»–ä¼šä»åºŠå¤´æŸœæ‹¿å‡ºè£å‰ªçš„å››å››æ–¹æ–¹çš„åˆé¤è‚‰ç½å¤´åŒ…è£…çº¸ï¼Œæ•™æˆ‘æŠ˜åƒçº¸é¹¤ï¼Œå¤–å…¬æŠ˜å‡ºæ¥çš„åƒçº¸é¹¤ç˜¦ç˜¦çš„ï¼Œç‰¹åˆ«å¥½çœ‹ã€‚ä»–å®¶è¿˜æœ‰å°è„šè¸é£ç´ï¼Œå°è±¡æœ€æ·±çš„ï¼Œå¤å¤©çš„åˆåï¼Œå¤–å…¬ç»™æˆ‘å¼¹ç€ä¸çŸ¥åçš„æ›²å­ï¼Œè¾¹å¼¹è¾¹å”±ï¼Œæˆ‘æŒ–ç€ä¸‰è‰²æ¯ï¼Œåœ¨è¾¹ä¸Šä¸çŸ¥æ‰€ä»¥çš„é»˜é»˜å¬ç€ã€‚ å¤–å…¬æ˜¯æ—¥æœ¬åä¾¨ï¼Œ18å²å›çš„ä¸Šæµ·ï¼Œè¯´ç€ä¸€å£æ—¥æœ¬è…”çš„ä¸Šæµ·è¯ï¼Œæˆ‘å¬ä¸æ‡‚ä»–åœ¨è¯´ä»€ä¹ˆï¼Œç»å¸¸ä¸è€çƒ¦åœ°ç»“æŸå’Œä»–çš„èŠå¤©ï¼Œä»–å´ä¹æ­¤ä¸ç–²åœ°å’Œæˆ‘çµ®çµ®å¨å¨ã€‚å°å­¦æ—¶æ¯é€¢æš‘å‡ä»–æ¥ç…§çœ‹æˆ‘ï¼Œä¼šä¹°ä¸€å¤§åŒ…ä¹äº‹çƒ§çƒ¤å‘³è–¯ç‰‡ï¼Œä¼šå’Œæˆ‘è®²èµ·ä»–ç«¥å¹´åœ¨ç¦å†ˆçš„è¶£äº‹ï¼Œä¸‹é›ªå¤©ç©¿ç€æœ¨å±ä¸Šå­¦å•¦ã€æš‘å‡å·å·å»ä¹°ç³–ç²¾å†°æ£å•¦ï¼Œå­¦æ ¡ä¸å¬è¯è¢«è€å¸ˆæ‰“æ‰‹å¿ƒå•¦ï¼Œä¼šè®©æˆ‘å°‘çœ‹ç”µè§†ï¼Œé™ªæˆ‘ç©çº¸ç‰Œï¼Œä¼šè®©æˆ‘æŠŠé¥­åƒå¹²å‡€ï¼Œè¯´è¿™æ˜¯ä¸€ç§å®Œæˆä»»åŠ¡â€¦â€¦ 2018å¹´çš„é™¤å¤•ï¼Œæ˜¯æˆ‘å’Œå¤–å…¬åƒçš„æœ€åä¸€é¡¿å¹´å¤œé¥­ã€‚å¤–å…¬ä»å°æ—¶å€™çš„æ¯å‘¨è§ä¸€æ¬¡ï¼Œåˆ°ç°åœ¨çš„æ¯å¹´è§ä¸€æ¬¡ï¼Œæ¯æ¬¡å¹´å¤œé¥­æ¡Œä¸Šå¤–å…¬ç¬‘å‘µå‘µçš„é—®æˆ‘åœ¨å“ªä¸Šç­ï¼Ÿå·¥ä½œæ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿæœ€è¿‘å¥½ä¸å¥½ï¼Ÿéƒ½è§‰å¾—å¥½æ¸©æš–å¥½äº²åˆ‡ï¼Œä»–çš„äº²åˆ‡ä»Šåå†ä¹Ÿè§ä¸åˆ°äº†ã€‚ æƒ³åˆ°èº«è¾¹å¤–å…¬ç•™ä¸‹çš„ä¸œè¥¿ï¼Œç¿»å‡ºä¸‰æ”¯é’¢ç¬”ï¼Œå“ªä¸€æ”¯æ˜¯ä»–é€çš„ä¸è®°å¾—äº†ï¼Œæƒ³åˆ°è¿™é‡Œï¼Œçœ¼æ³ªä¸€ä¸‹å­å´©äº†ï¼Œå¤–å…¬æ˜¯çˆ±æˆ‘çš„ï¼Œçˆ±è¿™ä¸ªå¤–å­™å¥³çš„ï¼Œæˆ‘æ€ä¹ˆèƒ½ä¸è®°å¾—ä»–é€çš„æ˜¯å“ªæ”¯é’¢ç¬”äº†å‘¢ï¼Ÿæˆ‘æ€ä¹ˆé‚£ä¹ˆè–„æƒ…å¯¡ä¹‰å‘¢ï¼Ÿæˆ‘å¥½æ²¡ç”¨ï¼Œè¿™ç§äº‹æƒ…éƒ½ä¸è®°å¾—ï¼Œç°åœ¨æƒ³é—®ä¹Ÿé—®ä¸åˆ°äº†ã€‚ å¥½åœ¨2019å¹´æˆ‘ç»“äº†å©šï¼Œè®©å¤–å…¬çœ‹åˆ°æˆ‘æˆå®¶äº†ï¼Œä»–è®°æŒ‚çš„äº‹æƒ…åº”è¯¥å°‘ä¸€ä»¶äº†å§ã€‚ å…³æ‰å’Œæˆ‘å¦ˆçš„å¯¹è¯æ¡†ï¼Œæ‰”æ‰äº†æ¹¿é€çš„çº¸å·¾ï¼Œå†…å¿ƒæ¢å¤äº†å¹³é™ã€‚ å¤–å…¬ï¼Œæˆ‘ä¼šç…§é¡¾å¥½è‡ªå·±å’Œå¦ˆå¦ˆçš„ï¼Œå¸Œæœ›ä½ ä¹Ÿæ˜¯ã€‚","link":"/grandpa/index.html"},{"title":"404","text":"","link":"/404.html"},{"title":"interview","text":"é¢å‘å¯¹è±¡ï¼šé‡ç‚¹æ”¾åœ¨å¯¹è±¡ï¼ˆæ•°æ®ï¼‰å’Œå¯¹è±¡çš„æ¥å£ä¸Šï¼Œè€Œéå¤„ç†å¯¹è±¡çš„å·¥å…·/è¿‡ç¨‹ä¸Š é¢å‘åˆ‡é¢ï¼šåä¹‹ JavaåŸºç¡€åŸºæœ¬æ•°æ®ç±»å‹ï¼šintã€shortã€longã€floatã€doubleã€charã€booleanã€byte ==ä¸equalsï¼ˆ==ï¼‰ï¼š åŸºæœ¬ç±»å‹æ¯”è¾ƒå€¼ å¼•ç”¨ç±»å‹æ¯”è¾ƒå¼•ç”¨åœ°å€ é‡å†™equalsæ–¹æ³•ä¼šæŠŠæ¯”è¾ƒåœ°å€æ”¹ä¸ºæ¯”è¾ƒå€¼ å¯¹è±¡çš„hashcodeç›¸åŒï¼Œå€¼ä¸ä¸€å®šç›¸åŒString str=â€iâ€ï¼šå¸¸é‡æ± ä¸­String str=new String(â€œiâ€)ï¼šå¯¹å†…å­˜ä¸­ finalï¼šç±»ä¸å¯è¢«ç»§æ‰¿ï¼Œæ–¹æ³•ä¸å¯è¢«é‡å†™ï¼Œå˜é‡ä¸ºå¸¸é‡ä¸å¯è¢«ä¿®æ”¹Stringï¼šä¸å¯å˜StringBufferï¼šå¯å˜ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œæ€§èƒ½å·®äº›String Builderï¼šå¯å˜ï¼Œç°æˆä¸å®‰å…¨ï¼Œæ€§èƒ½æ›´å¥½ æŠ½è±¡ç±»ä¸ä¸€å®šéè¦æœ‰æŠ½è±¡æ–¹æ³• å¸¸ç”¨ç±»åº“ï¼š é›†åˆCollection åå°„åŠ¨æ€ä»£ç†JVMå†…å­˜æ¨¡å‹å¤šçº¿ç¨‹ SpringåŸºç¡€ GrapgQLï¼šåœ¨åç«¯æ˜ç¡®æ¸…æ™°çš„åŸºç¡€ä¸Šæä¾›å¯ä¾›å‰ç«¯è‡ªå®šä¹‰è¯·æ±‚çš„httpæ¥å£ Mybatisï¼šéORMæ¡†æ¶JPAï¼šORMæ¡†æ¶ SpringCloud Dubbo æ¡†æ¶å°è£…åŸç† MySQLï¼šå¼•æ“ã€åŸºæœ¬æ•°æ®ç±»å‹ã€ç´¢å¼• Redis MongoDB MQ RocketMQ RabbitMQ Kafka AuthOShiroï¼š è®¤è¯ æäº¤è®¤è¯-&gt;æ‰§è¡Œè®¤è¯-&gt;è®¤è¯-&gt;è·å–éªŒè¯ä¿¡æ¯ æäº¤æˆæƒ-&gt; æ‰§è¡Œæˆæƒ-&gt; æˆæƒ-&gt;è·å–æƒé™ä¿¡æ¯ tomcat docker kubernets æŒç»­é›†æˆ docker compose æ•°æ®ç»“æ„&amp;ç®—æ³• æ’åº çº¢é»‘æ ‘ äºŒå‰æ ‘ è®¾è®¡æ¨¡å¼","link":"/interview/index.html"}],"posts":[{"title":"ubuntuæœåŠ¡å™¨éƒ¨ç½²","text":"é¦–å…ˆï¼Œä½ è¦æœ‰ä¸ªæœåŠ¡å™¨ã€‚ã€‚ã€‚ç›®å‰å¸‚é¢ä¸ŠæœåŠ¡å™¨ä¾›åº”å•†æœ‰å¾ˆå¤šï¼Œå›½å†…çš„é˜¿é‡Œã€å›½å¤–çš„AWSã€æ¬ç“¦å·¥ã€Vultrã€DigitalOceanç­‰ç­‰ï¼ŒæœåŠ¡å™¨å®ä¾‹åˆ›å»ºå®Œæˆåå¼€å§‹é…ç½®å§ã€‚ Login Remote Server1ssh username@ip-address Create new User and set its configuration åœ¨ubuntuæƒé™ä¸‹è®¾ç½® 123sudo adduser userNamensudo visudouserName ALL=(ALL:ALL) ALL or see this Update hosts nameä¸´æ—¶å˜æ›´ä¸»æœºå:â€œæ–°ä¸»æœºåâ€å¯ä»¥ç”¨ä»»ä½•åˆæ³•å­—ç¬¦ä¸²æ¥è¡¨ç¤ºã€‚é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œæ–°ä¸»æœºåå¹¶ä¸ä¿å­˜åœ¨ç³»ç»Ÿä¸­ï¼Œé‡å¯ç³»ç»Ÿåä¸»æœºåå°†æ¢å¤ä¸ºåŸå…ˆçš„ä¸»æœºåç§°ã€‚ hostname newName æ°¸ä¹…ä¿®æ”¹ä¸»æœºå:é‡å¯ç³»ç»Ÿåï¼Œå‚ç…§ä¸Šé¢ä»‹ç»çš„å¿«é€ŸæŸ¥çœ‹ä¸»æœºåçš„åŠæ³•æ¥ç¡®è®¤ä¸»æœºåæœ‰æ²¡æœ‰ä¿®æ”¹æˆåŠŸã€‚ å­˜æ”¾çš„æ˜¯ä¸»æœºå sudo vi /etc/hostname æ·»åŠ newName sudo vi /etc/hosts å­˜æ”¾çš„æ˜¯åŸŸåä¸ipçš„å¯¹åº”å…³ç³»ï¼ŒåŸŸåä¸ä¸»æœºåæ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œä½ å¯ä»¥ä¸ºä»»ä½•ä¸€ä¸ªIPæŒ‡å®šä»»æ„ä¸€ä¸ªåå­— ç¦æ­¢Rootè¿›è¡ŒSSHè¿œç¨‹ç™»å½• ä¿®æ”¹é…ç½®å°†PermitRootLogin yesæ”¹ä¸ºPermitRootLogin no é‡å¯sshæœåŠ¡å™¨,ä½¿é…ç½®å˜æ›´ç”Ÿæ•ˆ;é€šè¿‡rootç™»é™†æ—¶ï¼Œè¾“å…¥å¯†ç å‡ºç°Permission denied, please try again.è¯´æ˜è®¾ç½®æˆåŠŸsudo /etc/init.d/ssh restart pemé…ç½® åˆ‡æ¢ç”¨æˆ·åœ¨userNameç”¨æˆ·ç›®å½•ä¸‹ 1su userName åˆ›å»º.ssh 1cd ~\\nmkdir .ssh æ·»åŠ å…¬åŒ™ 12touch authorized_keysvi authorized_keys ï¼ˆimportantï¼šå…¬åŒ™çš„æ·»åŠ ä¸€å®šè¦ä»”ç»†ï¼é”™ä¸€ä¸ªå­—æ¯å°±ä¸åŒ¹é…ï¼Œæ— æ³•ç™»é™†ï¼ï¼ï¼ï¼‰ é…ç½®å®Œæˆåï¼Œå¯ç”¨å¯†åŒ™ç™»é™†:ssh -i ~/.ssh/joyce_ubuntu.pem ubuntu@ip-address OpenJDK 8 ä¸‹è½½ï¼Œå‘çš„è§£å†³http://askubuntu.com/questions/464755/how-to-install-openjdk-8-on-14-04-lts 1sudo add-apt-repository ppa:openjdk-r/ppa è‹¥æŠ¥é”™ï¼šsudo: add-apt-repository: command not foundæ‰§è¡Œï¼š 123sudo apt-get install software-properties-common sudo apt-get updatejava -version Nginx123sudo apt-get install nginxsudo service nginx restartservice nginx {start|stop|status|restart|reload|configtest|} ç”¨rootæƒé™èµ· 123sudo lsof -i:80curl localhost:80netstat -an Tomcat 8å®‰è£…tomcat8 ä¸å¯å®‰è£…åœ¨ç³»ç»Ÿç›®å½•ä¸‹ï¼Œå®‰è£…åœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼Œç³»ç»Ÿç›®å½•ä¸‹çš„æ“ä½œå‘½ä»¤ä¸æ™®é€šçš„ä¸ä¸€è‡´ã€‚ æ›´æ–° 1sudo apt-get update ä¸‹è½½(è¯¥ç½‘ç«™æœç´¢ç‰ˆæœ¬http://ftp.riken.jp/net/apache/tomcat/tomcat-8/) 1wget http://ftp.riken.jp/net/apache/tomcat/tomcat-8/v8.0.33/bin/apache-tomcat-8.0.33.tar.gz åˆ›å»ºæ–‡ä»¶å¤¹ 1mkdir demo è§£å‹è‡³ç›®æ ‡æ–‡ä»¶å¤¹ 1tar -zxvf ~/apache-tomcat-8.0.33.tar.gz -C ~/demo tarå‘½ä»¤ï¼š -c åˆ›å»º.taræ ¼å¼çš„æ–‡ä»¶ -x è§£å¼€.taræ ¼å¼çš„æ–‡ä»¶ -f ä½¿ç”¨å½’æ¡£æ–‡ä»¶ -v æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ -t æŸ¥çœ‹åŒ…å†…æ–‡ä»¶ -j ä½¿ç”¨baip2ç¨‹åº -z ä½¿ç”¨gzipç¨‹åº -p æ‰“åŒ…æ—¶ä¿ç•™æ–‡ä»¶åŠç›®å½•çš„æƒé™ -P æ‰“åŒ…æ—¶ä¿ç•™æ–‡ä»¶åŠç›®å½•çš„ç»å¯¹è·¯å¾„ -C é‡Šæ”¾çš„ç›®çš„åœ° ä¿®æ”¹å·¥ç¨‹å/bin/catalina.sh 1234cp catalina.sh catalina.sh.datevi catalina.shæ·»åŠ (æ”¹ä¸ºç”Ÿäº§ç¯å¢ƒ)JAVA_OPTS='-Dspring.profiles.active=prod -Xms512m -Xmx2048m -XX:PermSize=256M -XX:MaxNewSize=256m -XX:MaxPermSize=256m' ä¿®æ”¹è¯¥tomcatä¸­server.xmlï¼Œä¿®æ”¹ç›¸å…³port(é¿å…ä¸æœåŠ¡å™¨ä¸­å…¶ä»–tomcatç«¯å£å†²çª) å°†æ‰“åŒ…åçš„å·¥ç¨‹.waræ–‡ä»¶æ”¾å…¥demo/webapps/è·³è¿‡æµ‹è¯•æ‰“åŒ… 1mvn -Pprod package -Dmaven.test.skip=true æ‰“åŒ… ä¿¡æ¯è¾“å‡ºåˆ°æ–‡ä»¶ 1mvn -Pprod package -Dmaven.test.skip=true &gt; demo.log Postgresql æ›´æ–° 1sudo apt-get update ä¸‹è½½æœåŠ¡ç«¯ 1sudo apt-get install postgresql postgresql-contrib pgå¯åŠ¨ï¼é‡å¯ï¼åœæ­¢ 1sudo /etc/init.d/postgresql start/restart/stop è¿›å…¥pg 1sudo -i -u postgres å¸¦å¯†ç åˆ›å»ºç”¨æˆ· 1createuser username -P ä¸å¸¦å¯†ç åˆ›å»ºç”¨æˆ· 1createuser username åˆ é™¤ç”¨æˆ· 1dropper username åˆ›å»ºæ•°æ®åº“ 1createdb dbname","link":"/2016/02/20/ubuntu-server/"},{"title":"TensorFlowå®‰è£…","text":"read more on github 1. å®‰è£…1.1 ubuntuå®‰è£…1.2 Mac OSå®‰è£…TensorFlow Python API ä¾èµ– Python 2.7 ç‰ˆæœ¬ 12brew install python2.7pip install https://storage.googleapis.com/tensorflow/mac/tensorflow-0.5.0-py2-none-any.whl 1.3 ä½¿ç”¨å®¹å™¨VirtualEnvå®‰è£…æ¨èä½¿ç”¨ virtualenv åˆ›å»ºä¸€ä¸ªéš”ç¦»çš„å®¹å™¨, æ¥å®‰è£… TensorFlow. è¿™æ ·åšèƒ½ä½¿æ’æŸ¥å®‰è£…é—®é¢˜å˜å¾—æ›´å®¹æ˜“ 123# åœ¨ Mac ä¸Š:sudo easy_install pip # å¦‚æœè¿˜æ²¡æœ‰å®‰è£… pipsudo pip install --upgrade virtualenv å»ºç«‹ä¸€ä¸ªå…¨æ–°çš„ virtualenv ç¯å¢ƒ,å°†ç¯å¢ƒå»ºåœ¨ ~/tensorflow ç›®å½•ä¸‹ 12virtualenv --system-site-packages ~/tensorflowcd ~/tensorflow æ¿€æ´» virtualenv 123source bin/activate # å¦‚æœä½¿ç”¨ bashsource bin/activate.csh # å¦‚æœä½¿ç”¨ csh(tensorflow)$ # ç»ˆç«¯æç¤ºç¬¦åº”è¯¥å‘ç”Ÿå˜åŒ– åœ¨ virtualenv å†…, å®‰è£… TensorFlow 123456789(tensorflow)$ pip install --upgrade &lt;$url_to_binary.whl&gt;&lt;$url_to_binary.whl&gt;é€‰æ‹©:# Macåªæ”¯æŒ CPUhttps://storage.googleapis.com/tensorflow/mac/tensorflow-0.5.0-py2-none-any.whl# Linuxåªæ”¯æŒ CPUhttps://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.5.0-cp27-none-linux_x86_64.whl# å¼€å¯ GPU æ”¯æŒçš„ç‰ˆæœ¬ (å®‰è£…è¯¥ç‰ˆæœ¬çš„å‰ææ˜¯å·²ç»å®‰è£…äº† CUDA sdk)https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.5.0-cp27-none-linux_x86_64.whl è¿è¡Œ TensorFlow ç¨‹åº 12(tensorflow)$ cd tensorflow/models/image/mnist(tensorflow)$ python convolutional.py or 123456pythonimport tensorflow as tfhello = tf.constant('Hello, TensorFlow!')sess = tf.Session()print sess.run(hello)Hello, TensorFlow! å½“ä½¿ç”¨å®Œ TensorFlow 12# åœç”¨ virtualenv(tensorflow)$ deactivate 1.4 ä»æºç å®‰è£… clone TensorFlow ä»“åº“ 12# --recurse-submodules å‚æ•°æ˜¯å¿…é¡»å¾—, ç”¨äºè·å– TesorFlow ä¾èµ–çš„ protobuf åº“git clone --recurse-submodules https://github.com/tensorflow/tensorflow Mac OSå®‰è£…æ‰€éœ€ä¾èµ–ï¼šBazel, SWIG 12345678910111213141516 brew install bazel brew install swig ``` ## 2. æ —å­### 2.1 For Java[example](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/java)JDK1.7* Start Using Apache Maven - åˆ›å»ºMavenå·¥ç¨‹ - æ·»åŠ ä¾èµ– org.tensorflow tensorflow 1.1.0-rc1 12- ä¸‹è½½æ ·ä¾‹ä»£ç æ·»åŠ è‡³```src/main/java/org/tensorflow/examples``` mkdir -p src/main/java/org/tensorflow/examples curl -L \"https://raw.githubusercontent.com/tensorflow/tensorflow/master/tensorflow/java/src/main/java/org/tensorflow/examples/LabelImage.java\" -o src/main/java/org/tensorflow/examples/LabelImage.java 123 - ç¼–è¯‘ mvn compile exec:java ``` Start Using java and javac 2.2 Python Example","link":"/2017/10/08/TensorFlow%E5%AE%89%E8%A3%85/"},{"title":"crontab","text":"å®šæ—¶ä»»åŠ¡Cronè¡¨è¾¾å¼å…±ä¸ƒä½ï¼Œæœ€å°‘å…­ä½ï¼Œè¡¨ç¤ºå¦‚ä¸‹ï¼Œå…¶ä¸­å¯¹è‹±æ–‡ç¼©å†™ã€ç‰¹æ®Šå­—ç¬¦å¤§å°å†™ä¸æ•æ„Ÿ * * * * * * * ç§’ åˆ† æ—¶ æ—¥ æœˆ å‘¨ å¹´ 0-59 0-59 0-23 1-31 1-12/JAN-DEC 0-7/MON-SAT 1900 å¯é€‰ , - * / , - * / , - * / , - * ? / L W C , - * / , - * ? / L C # , - * / ç¬¦å·è¡¨ç¤ºå¦‚ä¸‹ï¼š ç¬¦å· è¯´æ˜ * é‡å¤å½“å‰ä½ç½®çš„å‘¨æœŸï¼Œå¦‚1 * * * * ?è¡¨ç¤ºæ¯åˆ†é’Ÿçš„ç¬¬ä¸€ç§’æ‰§è¡Œ , ç”¨äºæŒ‡å®šå¤šä¸ªå€¼ï¼Œå¦‚0 10,20,30 * * * ?è¡¨ç¤ºæ¯å°æ—¶çš„10ã€20ã€30åˆ†æ‰§è¡Œ ? å ä½ç¬¦ - è¡¨ç¤ºåŒºé—´ / a/bè¡¨ç¤ºä»¥ a ä¸ºèµ·ç‚¹æ­¥é•¿ä¸º b çš„æ—¶é—´åºåˆ—ï¼Œå¦‚5/10 * * * * ?è¡¨ç¤ºæ¯åˆ†é’Ÿç¬¬5ã€15ã€25ã€35ã€45ã€55ç§’æ‰§è¡Œ L æœˆä»½æœ€åä¸€å¤©æˆ–æ˜ŸæœŸå…­ï¼Œå‘¨ä½ä¸Š 6L è¡¨ç¤ºæœˆä»½çš„æœ€åä¸€ä¸ªå‘¨äº”æ‰§è¡Œï¼ŒLå’Œ W å¯ä»¥åœ¨æ—¥ä½ä¸­è”åˆä½¿ç”¨ï¼ŒLW è¡¨ç¤ºè¿™ä¸ªæœˆæœ€åä¸€å‘¨çš„å·¥ä½œæ—¥ W åè¾¹æœ€è¿‘çš„å·¥ä½œæ—¥ï¼Œ1W 1æ—¥å¦‚æœæ˜¯å‘¨äº”ï¼Œé‚£å°±åœ¨4æ—¥æ‰§è¡Œï¼Œä¸å¯è·¨æœˆï¼ŒLå’Œ W å¯ä»¥åœ¨æ—¥ä½ä¸­è”åˆä½¿ç”¨ï¼ŒLW è¡¨ç¤ºè¿™ä¸ªæœˆæœ€åä¸€å‘¨çš„å·¥ä½œæ—¥ # a#b è¡¨ç¤ºå½“æœˆç¬¬ b ä¸ªæ˜ŸæœŸ aï¼Œå¦‚ 6#1 å½“æœˆç¬¬ä¸€ä¸ªæ˜ŸæœŸäº” C å…³è”æ—¥å†è®¡ç®—ç»“æœ åœºæ™¯ç¤ºä¾‹1.Macè®¾ç½®å®šæ—¶ä»»åŠ¡1234567891011121314151617# ç¡®ä¿å­˜åœ¨æ–‡ä»¶ /etc/crontabï¼Œè‹¥æ²¡æœ‰åˆ™æ–°å»ºsudo touch /etc/crontab# ç¼–è¾‘crontabï¼Œå†™å…¥å®šæ—¶è„šæœ¬vi /etc/crontab# ç”Ÿæ•ˆå®šæ—¶è„šæœ¬crontab /etc/crontab# æŸ¥çœ‹å®šæ—¶ä»»åŠ¡æ˜¯å¦å¯åŠ¨sudo launchctl list | grep cron# çŠ¶æ€æŸ¥çœ‹sudo /usr/sbin/cron start | restart | stop# æŸ¥çœ‹å·²æœ‰ä»»åŠ¡åˆ—è¡¨sudo crontab -l# ç¼–è¾‘ä»»åŠ¡sudo crontab -e# åˆ é™¤ å®šæ—¶è„šæœ¬ æ–‡ä»¶sudo crontab -r æˆ‘ç”¨terminal-notifieræ¥å®ç°terminalæ¨é€æé†’åŠŸèƒ½ï¼Œè„šæœ¬å¦‚ä¸‹ï¼š 1234# æ¯æ—¥å‡Œæ™¨æ›´æ–°homebrew30 1 * * * * brew upadte# åŠå°æ—¶èµ·æ¥èµ°åŠ¨30 */1 * * * /usr/local/bin/terminal-notifier -title &quot;ä¼‘æ¯ï¼Œä¼‘æ¯ä¸€ä¸‹&quot; -message &quot;ä½ å†ä¸ç«™èµ·æ¥è¦å˜æ­»è‚¥å®…äº†!&quot; -ignoreDnD -group 1 2.Javaä¸­çš„å®šæ—¶ä»»åŠ¡éœ€æ±‚2.1 java.util.Timer (since JDK1.3)æ‰§è¡Œæ—¶å•çº¿ç¨‹ï¼Œå½“æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸æ—¶Timer å°†åœæ­¢æ‰€æœ‰çš„ä»»åŠ¡æ‰§è¡Œï¼Œä¼šå½±å“å…¶ä»–ä»»åŠ¡ 12345678910111213public void demo() { // å®šä¹‰ä¸€ä¸ªä»»åŠ¡ TimerTask timerTask = new TimerTask() { @Override public void run() { System.out.println(&quot;Run timerTaskï¼š&quot; + System.currentTimeMillis()); } }; // è®¡æ—¶å™¨ Timer timer = new Timer(); // æ·»åŠ æ‰§è¡Œä»»åŠ¡ï¼ˆå»¶è¿Ÿ 1s æ‰§è¡Œï¼Œæ¯ 3s æ‰§è¡Œä¸€æ¬¡ï¼‰ timer.schedule(timerTask, 1000, 3000);} 2.2 java.util.concurrent.ScheduledExecutorService (since JDK1.5)ä¸å½±å“å…¶ä»–ä»»åŠ¡ 123456789public void demo() { // åˆ›å»ºä»»åŠ¡é˜Ÿåˆ— ScheduledExecutorService scheduledExecutorService = Executors.newScheduledThreadPool(10); // 10 ä¸ºçº¿ç¨‹æ•°é‡ // æ‰§è¡Œä»»åŠ¡ scheduledExecutorService.scheduleAtFixedRate(() -&gt; { System.out.println(&quot;Run Scheduleï¼š&quot; + System.currentTimeMillis()); }, 1, 3, TimeUnit.SECONDS); // 1s åå¼€å§‹æ‰§è¡Œï¼Œæ¯ 3s æ‰§è¡Œä¸€æ¬¡} 2.3 @Scheduled (based on Spring)Springè‡ªåŠ¨åŠ è½½å’Œç®¡ç†è¯¥å®šæ—¶ä»»åŠ¡ 12345678910111213@SpringBootApplication@EnableScheduling // å¼€å¯å®šæ—¶ä»»åŠ¡public class DemoApplication { ...}@Component public class TaskUtils { @Scheduled(cron = â€œ0 1 * * * â€ ) public void doTask(){ System.out.println(â€œæ‰§è¡Œå®šæ—¶ä»»åŠ¡&quot;); }} 2.4 ä»»åŠ¡è°ƒåº¦æ¡†æ¶Quartzåœ¨é¡¹ç›®ä¸­ä½¿ç”¨éœ€è¦å¼•å…¥quartzä¾èµ–ï¼Œå¹¶ä¸”quartzæœ‰å…¶ç‹¬ç«‹çš„æ•°æ®åº“ï¼Œæ¥æ”¯æ’‘å¤æ‚çš„ä»»åŠ¡è°ƒåº¦ï¼Œè¯¦è§å®˜æ–¹æ–‡æ¡£","link":"/2020/11/03/crontab/"},{"title":"åœ¨æœ¬æœºä¸ŠåŒæ—¶ä½¿ç”¨GitHubä¸GitLab","text":"åœ¨æœ¬æœºä¸ŠåŒæ—¶ä½¿ç”¨GitHubä¸GitLab è¿›å…¥.sshæ–‡ä»¶å¤¹ 1cd .ssh/ ä¿®æ”¹configæ–‡ä»¶(è‹¥æ²¡æœ‰ï¼Œtouch config) 12345678910# gitlabHost gitlab.com HostName gitlab.com PreferredAuthentications publickey IdentityFile ~/.ssh/id_rsa# githubHost github.com HostName github.com PreferredAuthentications publickey IdentityFile ~/.ssh/id_rsa_github æµ‹è¯•è¿æ¥ 1ssh -T git@github.com è‹¥è¾“å‡ºå¦‚ä¸‹ï¼Œåˆ™è¿æ¥æˆåŠŸ 1Hi BreadKid! You've successfully authenticated, but GitHub does not provide shell access. å‚è€ƒåšå®¢","link":"/2017/01/17/git-config/"},{"title":"Macä¸‹çš„é…ç½®æ–‡ä»¶","text":"profilelocation: /etc/profile è®¾ç½®ç³»ç»Ÿçº§çš„ç¯å¢ƒå˜é‡å’Œå¯åŠ¨ç¨‹åº ä¼šå¯¹æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆ ç”¨æˆ·ç™»å½•ï¼ˆloginï¼‰æ—¶ï¼Œæ–‡ä»¶ä¼šè¢«æ‰§è¡Œï¼Œå¹¶ä»/etc/profile.dç›®å½•çš„é…ç½®æ–‡ä»¶ä¸­æœé›†shellçš„è®¾ç½® ä¿®æ”¹å®Œåç”¨sourceç”Ÿæ•ˆ:source /etc/profile bash_profilelocation:~/.bash_profile ç”¨æˆ·çº§çš„è®¾ç½®ï¼Œåªé’ˆå¯¹å•ä¸ªç”¨æˆ·æœ‰æ•ˆ æ‰§è¡Œé¡ºåº/etc/profile &gt; ~/.bash_profile &gt; ~/.bash_login &gt; ~/.profile","link":"/2018/06/06/mac-files/"},{"title":"nginx","text":"Nginxè´Ÿè½½å‡è¡¡æœ‰4ç§æ–¹æ¡ˆé…ç½® è½®è¯¢ï¼šè½®è¯¢å³Round Robinï¼Œæ ¹æ®Nginxé…ç½®æ–‡ä»¶ä¸­çš„é¡ºåºï¼Œä¾æ¬¡æŠŠå®¢æˆ·ç«¯çš„Webè¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ä¸Š æœ€å°‘è¿æ¥ least_connï¼šWebè¯·æ±‚ä¼šè¢«è½¬å‘åˆ°è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨ä¸Š IPåœ°å€å“ˆå¸Œ ip_hashï¼šå‰è¿°çš„ä¸¤ç§è´Ÿè½½å‡è¡¡æ–¹æ¡ˆä¸­ï¼ŒåŒä¸€å®¢æˆ·ç«¯è¿ç»­çš„Webè¯·æ±‚å¯èƒ½ä¼šè¢«åˆ†å‘åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œå› æ­¤å¦‚æœæ¶‰åŠåˆ°ä¼šè¯Sessionï¼Œé‚£ä¹ˆä¼šè¯ä¼šæ¯”è¾ƒå¤æ‚ã€‚å¸¸è§çš„æ˜¯åŸºäºæ•°æ®åº“çš„ä¼šè¯æŒä¹…åŒ–ã€‚è¦å…‹æœä¸Šé¢çš„éš¾é¢˜ï¼Œå¯ä»¥ä½¿ç”¨åŸºäºIPåœ°å€å“ˆå¸Œçš„è´Ÿè½½å‡è¡¡æ–¹æ¡ˆã€‚è¿™æ ·çš„è¯ï¼ŒåŒä¸€å®¢æˆ·ç«¯è¿ç»­çš„Webè¯·æ±‚éƒ½ä¼šè¢«åˆ†å‘åˆ°åŒä¸€æœåŠ¡å™¨è¿›è¡Œå¤„ç† åŸºäºæƒé‡ weightåŸºäºæƒé‡çš„è´Ÿè½½å‡è¡¡å³Weighted Load Balancingï¼Œè¿™ç§æ–¹å¼ä¸‹ï¼Œå¯ä»¥é…ç½®NginxæŠŠè¯·æ±‚æ›´å¤šåœ°åˆ†å‘åˆ°é«˜é…ç½®çš„åç«¯æœåŠ¡å™¨ä¸Šï¼ŒæŠŠç›¸å¯¹è¾ƒå°‘çš„è¯·æ±‚åˆ†å‘åˆ°ä½é…æœåŠ¡å™¨","link":"/2018/02/12/nginx/"},{"title":"å…è´¹CloudFlare SSLé…ç½®","text":"ç°åœ¨å¥½å¤šç½‘ç«™éƒ½è½¬æˆäº†httpsï¼Œå¤–åŠ å°ç¨‹åºå¼ºåˆ¶httpsï¼Œè¿™å°ç½‘ç«™ç®—å‡‘å‡‘çƒ­é—¹ã€‚ç½‘ä¸ŠæŸ¥é˜…äº›è¿‡æ¥äººçš„æ•™å­¦åšå®¢ï¼Œå‘ç°å¤§å®¶éƒ½ç”¨CloudFlareçš„å…è´¹SSLï¼Œæˆ‘çš„ç½‘ç«™æœ¬æ¥æ˜¯åŸºäºGitpagesæ­å»ºçš„ï¼Œè™½ç„¶Gitpagesæä¾›äº†Httpsçš„è®¾ç½®(ç›¸å…³å®˜æ–¹æ–‡æ¡£)ï¼Œä½†è¦ç”¨è¯¥åŠŸèƒ½çš„è¯å¿…é¡»æ˜¯github.ioçš„åŸŸåã€‚æˆ‘ç”¨è‡ªå·±çš„breadykid.comåŸŸåï¼Œæ‰€ä»¥éœ€è¦æŠ˜è…¾ä¸€ä¸‹ã€‚ Step1:åœ¨CFæ·»åŠ åŸŸåï¼Œè·å–æä¾›çš„NameServeræ³¨å†ŒCloudFlareè´¦å·ï¼Œåˆ›å»ºç«™ç‚¹è·å¾—CloudFlareæä¾›çš„DNSã€‚ æ·»åŠ ç«™ç‚¹ï¼Œæ‰«æåŸŸåè¾“å…¥ä¸ªäººåŸŸåå¼€å§‹æ‰«ææ‰«æå®Œæ¯• æ·»åŠ DNS Recordsæ·»åŠ å®Œæˆ æŒ‰ç…§step2å»æ‰€åœ¨çš„åŸŸåæœåŠ¡å•†é‚£ä¿®æ”¹DNS é€‰æ‹©ç‰ˆæœ¬ï¼Œç©·å›°çš„æˆ‘å½“ç„¶é€‰å…è´¹çš„å•¦ï½ï½ï½ æ£€æŸ¥ç½‘ç«™æ˜¯å¦æ¿€æ´»ç½‘ç«™å·²ç»å¤„äºæ¿€æ´»çŠ¶æ€äº† é…ç½®é€‰é¡¹,flexibleä¸ºäº†è®¿å®¢åˆ°cfçš„è¿‡ç¨‹æ˜¯åŠ å¯†çš„ï¼Œè€Œcfåˆ°gitpagesä¸åŠ å¯† ä»¥ä¸Šï¼Œå®Œæˆåç­‰å¾…CloudFlareæ·»åŠ çš„ç½‘ç«™ä¸ºæ¿€æ´»çŠ¶æ€ï¼Œä½¿ç”¨httpsæ‰“å¼€ä¸ªäººç½‘ç«™ã€‚ Step2:ä¿®æ”¹åŸŸåDNSæœåŠ¡å™¨å»è‡ªå·±çš„åŸŸåæœåŠ¡å•†é‚£è¾¹ä¿®æ”¹DNSï¼Œæˆ‘åœ¨ä¸‡ç½‘ä¹°çš„ï¼Œä»¥ä¸‹æ˜¯ä¸‡ç½‘ç•Œé¢ã€‚ Step3:ä¿®æ”¹Hexoçš„é…ç½®æ–‡ä»¶ ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶_config.yml12url: https://www.yoursite.com # with the https protocolenforce_ssl: www.yoursite.com # without any protocol è‡³æ­¤ï¼Œç½‘ç«™å·²ç»å¯ä»¥ç”¨httpsè®¿é—®ï¼Œä½†å¿…é¡»æ‰‹åŠ¨è¾“å…¥httpså‰ç¼€æ‰è¡Œï¼Œè¿™é‡Œæˆ‘ä»¬å°†å…¶æ”¹ä¸ºå¼ºåˆ¶httpsã€‚* ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œä»¥ä¸‹ä¸ºNextä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œthemes/next/layout/_layout.swigï¼Œåœ¨å¤´éƒ¨åŠ ä¸Šï¼š 12345&lt;script type=&quot;text/javascript&quot;&gt; var host = &quot;yoursite.com&quot;; if ((host == window.location.host) &amp;&amp; (window.location.protocol != &quot;https:&quot;)) window.location.protocol = &quot;https&quot;;&lt;/script&gt; è‡³æ­¤ï¼Œç½‘ç«™è·³è½¬httpså…¨éƒ¨å®ç°ã€‚ å‚è€ƒ:CloudFlareæ•™ç¨‹nextä¸»é¢˜å¼ºåˆ¶https","link":"/2017/01/16/%E5%85%8D%E8%B4%B9CloudFlare-SSL%E9%85%8D%E7%BD%AE/"},{"title":"å¾®ä¿¡H5æ”¯ä»˜","text":"å¾®ä¿¡è§£è¯» ä½¿ç”¨åœºæ™¯å•†æˆ·å·²æœ‰H5å•†åŸç½‘ç«™ï¼Œç”¨æˆ·é€šè¿‡æ¶ˆæ¯æˆ–æ‰«æäºŒç»´ç åœ¨å¾®ä¿¡å†…æ‰“å¼€ç½‘é¡µæ—¶ï¼Œå¯ä»¥è°ƒç”¨å¾®ä¿¡æ”¯ä»˜å®Œæˆä¸‹å•è´­ä¹°çš„æµç¨‹ã€‚ æ­¥éª¤ å•†æˆ·ä¸‹å‘å›¾æ–‡æ¶ˆæ¯æˆ–è€…é€šè¿‡è‡ªå®šä¹‰èœå•å¸å¼•ç”¨æˆ·ç‚¹å‡»è¿›å…¥å•†æˆ·ç½‘é¡µã€‚ è¿›å…¥å•†æˆ·ç½‘é¡µï¼Œç”¨æˆ·é€‰æ‹©è´­ä¹°ï¼Œå®Œæˆé€‰è´­æµç¨‹ã€‚ ç®€è¿°å¾®ä¿¡çš„H5é¡µé¢æ”¯ä»˜åªéœ€åœ¨å•†å®¶çš„ä»˜æ¬¾é¡µé¢ä¸Šè°ƒç”¨wechatçš„APIå³å¯ï¼Œè°ƒç”¨æ—¶éœ€è¦æä¾›ä¸€äº›æŒ‡å®šå‚æ•°ï¼Œæ‰€ä»¥ï¼Œå‰ç«¯é¡µé¢ä»£ç åªéœ€å¤åˆ¶å¾®ä¿¡å®˜æ–¹æä¾›çš„é¡µé¢æ–¹æ³•å³å¯ï¼›è€Œåç«¯éœ€è¦åšçš„ï¼Œå°±æ˜¯å°†æ”¯ä»˜æ‰€éœ€å‚æ•°ç”Ÿæˆæ­£ç¡®å¹¶ä¼ é€’åˆ°é¡µé¢å³å¯ã€‚ ç½‘é¡µç«¯è°ƒèµ·æ”¯ä»˜APIæ‰€éœ€å‚æ•°è¯¦è§å¾®ä¿¡å®˜æ–¹æ–‡æ¡£ wechat linkåœ¨å¾®ä¿¡æµè§ˆå™¨é‡Œé¢æ‰“å¼€H5ç½‘é¡µä¸­æ‰§è¡ŒJSè°ƒèµ·æ”¯ä»˜ã€‚æ¥å£è¾“å…¥è¾“å‡ºæ•°æ®æ ¼å¼ä¸ºJSONã€‚æ³¨æ„ï¼šWeixinJSBridgeå†…ç½®å¯¹è±¡åœ¨å…¶ä»–æµè§ˆå™¨ä¸­æ— æ•ˆã€‚åˆ—è¡¨ä¸­å‚æ•°ååŒºåˆ†å¤§å°ï¼Œå¤§å°å†™é”™è¯¯ç­¾åéªŒè¯ä¼šå¤±è´¥ã€‚ ç½‘é¡µç«¯æ¥å£å‚æ•°åˆ—è¡¨: | åç§° |å˜é‡å|å¿…å¡«|ç±»å‹|ç¤ºä¾‹|æè¿°|| å…¬ä¼—å·id | appId | æ˜¯ | String(16) | wx8888888888888888 | å…¬ä¼—å·åç§°ï¼Œç”±å•†æˆ·ä¼ å…¥ï¼Œå•†æˆ·æ³¨å†Œå…·æœ‰æ”¯ä»˜æƒé™çš„å…¬ä¼—å·æˆåŠŸåå³å¯è·å¾— || æ—¶é—´æˆ³ | timeStamp | æ˜¯ | String(32) | 1414561699 | å½“å‰çš„æ—¶é—´ï¼Œè‡ª1970å¹´ä»¥æ¥çš„ç§’æ•°ï¼Œå…¶ä»–è¯¦è§æ—¶é—´æˆ³è§„åˆ™ || éšæœºå­—ç¬¦ä¸² | nonceStr | æ˜¯ | String(32) | 5K8264ILTKCH16CQ2502SI8ZNMTM67VS | éšæœºå­—ç¬¦ä¸²ï¼Œä¸é•¿äº32ä½ã€‚||è®¢å•è¯¦æƒ…æ‰©å±•å­—ç¬¦ä¸²|package|æ˜¯|String(128)|prepay_id=123456789|ç»Ÿä¸€ä¸‹å•æ¥å£è¿”å›çš„å‚æ•°å€¼ï¼Œæäº¤æ ¼å¼å¿…é¡»å¦‚ç¤ºä¾‹æ‰€ç¤º||ç­¾åæ–¹å¼| type | æ˜¯ | String(32) | MD5 |ç­¾åç®—æ³•|| æ—¶é—´æˆ³ | timeStamp | æ˜¯ | String(64) | C380BEC2BFD727A4B6845133519F3AD6 |ç­¾å| ç­¾åç”Ÿæˆç®—æ³•æ—¶é—´æˆ³è§„åˆ™éšæœºæ•°ç”Ÿæˆç®—æ³• ç½‘é¡µå†…æ”¯ä»˜æ¥å£err_msgè¿”å›ç»“æœå€¼è¯´æ˜: |è¿”å›å€¼|æè¿°||ok|æ”¯ä»˜æˆåŠŸï¼Œä»…åœ¨ç”¨æˆ·æˆåŠŸå®Œæˆæ”¯ä»˜æ—¶è¿”å›||cancel|æ”¯ä»˜è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·å–æ¶ˆ(å¯ä»¥ç»Ÿä¸€å¤„ç†ä¸ºç”¨æˆ·é‡åˆ°é”™è¯¯æˆ–è€…ä¸»åŠ¨æ”¾å¼ƒï¼Œä¸å¿…ç»†åŒ–åŒºåˆ†)||fail|æ”¯ä»˜å¤±è´¥(å¯ä»¥ç»Ÿä¸€å¤„ç†ä¸ºç”¨æˆ·é‡åˆ°é”™è¯¯æˆ–è€…ä¸»åŠ¨æ”¾å¼ƒï¼Œä¸å¿…ç»†åŒ–åŒºåˆ†)| ç½‘é¡µç«¯è°ƒèµ·æ”¯ä»˜APIç¤ºä¾‹ä»£ç 123456789101112131415161718192021222324252627282930313233function onBridgeReady(){ WeixinJSBridge.invoke( 'getBrandWCPayRequest', { &quot;appId&quot; ï¼š &quot;wx2421b1c4370ec43b&quot;, //å…¬ä¼—å·åç§°ï¼Œç”±å•†æˆ·ä¼ å…¥ &quot;timeStamp&quot;ï¼š&quot; 1395712654&quot;, //æ—¶é—´æˆ³ï¼Œè‡ª1970å¹´ä»¥æ¥çš„ç§’æ•° &quot;nonceStr&quot; ï¼š &quot;e61463f8efa94090b1f366cccfbbb444&quot;, //éšæœºä¸² &quot;package&quot; ï¼š &quot;prepay_id=u802345jgfjsdfgsdg888&quot;, &quot;signType&quot; ï¼š &quot;MD5&quot;, //å¾®ä¿¡ç­¾åæ–¹å¼ï¼š &quot;paySign&quot; ï¼š &quot;70EA570631E4BB79628FBCA90534C63FF7FADD89&quot; //å¾®ä¿¡ç­¾å }, function(res){ if (res.err_msg == &quot;get_brand_wcpay_request:ok&quot;) { alert(&quot;pay success&quot;); } if (res.err_msg == &quot;get_brand_wcpay_request:cancel&quot;) { alert(&quot;pay cancel&quot;); } if (res.err_msg == &quot;get_brand_wcpay_request:fail&quot;) { alert(&quot;pay failed&quot;); } } ); } if (typeof WeixinJSBridge == &quot;undefined&quot;){ if( document.addEventListener ){ document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false); }else if (document.attachEvent){ document.attachEvent('WeixinJSBridgeReady', onBridgeReady); document.attachEvent('onWeixinJSBridgeReady', onBridgeReady); } }else{ onBridgeReady(); } åç«¯ä»£ç å‰–æä¸æ”¯ä»˜H5é¡µé¢äº¤äº’ç±»å…¶ä¸­notify_urlä¸è®¾ç½®è¯¦è§ä¸‹å›¾æ”¯ä»˜æˆæƒç›®å½•ï¼šxzl.gxcm.com.cn/#/ä¸ºiOSè·¯å¾„xzl.gxcm.com.cn/#/course/ä¸ºandroidè·¯å¾„æ”¯ä»˜æˆæƒç›®å½•.png?nolinkå¾®ä¿¡æ”¯ä»˜è®¾ç½®ï¼šéœ€è¦ä¸ºæµ‹è¯•äººå‘˜è®¾ç½®ç™½åå•ï¼Œå¦åˆ™æ— æ³•æ”¯ä»˜å¼€å‘é…ç½®.png?nolink 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import com.*.CommonUtil;import com.*.MD5SignUtil;import com.*.PayUtil;import com.*.WeChatConnector;import org.springframework.ui.Model;import java.util.HashMap;import java.util.Map;import java.util.UUID;public class WechatPayService{ private static Log log= LogFactory.getLog(WechatPayService.class); public String wechatPay(Model model, String openId, String price) throws Exception { String paternerKey = &quot;demo123456demo123456demo123456de&quot;; // å¯†é’¥ï¼Œéœ€ç™»å½•å¾®ä¿¡æ”¯ä»˜å¹³å°è·å¾— String appId = WeChatConnector.getMpConfigStorage().getAppId(); // å…¬ä¼—å·åç§°ï¼Œç”±å•†æˆ·ä¼ å…¥ String timestamp = System.currentTimeMillis() / 1000 + &quot;&quot;; String nonceStr = UUID.randomUUID().toString().substring(0, 32); String num = (Double.parseDouble(price) * 100 + &quot;&quot;).substring(0, (Double.parseDouble(price) * 100 + &quot;&quot;).indexOf(&quot;.&quot;)); // å¯¹é¡µé¢ä¼ å…¥çš„ä»·æ ¼è¿›è¡Œå¤„ç† PayUtil payUtil = new PayUtil(); // get prepayid Map map = new HashMap(); map.put(&quot;appid&quot;, appId); map.put(&quot;mch_id&quot;, &quot;1235171102&quot;); // å•†æˆ·å· map.put(&quot;nonce_str&quot;, nonceStr); // éšæœºæ•° map.put(&quot;body&quot;, &quot;é«˜æ ¡ä¼ åª’&quot;); // äº§å“å map.put(&quot;out_trade_no&quot;, payUtil.orderNum()); map.put(&quot;total_fee&quot;, price); // æ€»ä»·ï¼Œä»¥â€œåˆ†â€ä¸ºå•ä½ map.put(&quot;spbill_create_ip&quot;, &quot;127.0.0.1&quot;); // request.getRemoteAddr() map.put(&quot;notify_url&quot;, &quot;http://xzl.gxcm.com.cn/wechat/gitPay&quot;); // æ”¯ä»˜æˆæƒç›®å½•ï¼Œè®¾ç½®è§ä¸‹å›¾ map.put(&quot;trade_type&quot;, &quot;JSAPI&quot;); // æ”¯ä»˜æ¥å£ç±»å‹ map.put(&quot;attach&quot;, courseId); // è¯¾ç¨‹Id map.put(&quot;openid&quot;, openId); // ç”¨æˆ·çš„openId String paySign = MD5SignUtil.sign(CommonUtil.FormatBizQueryParaMap(map), paternerKey); map.put(&quot;sign&quot;, paySign); // sign String xml = CommonUtil.ArrayToXml(map); String prepayid = payUtil.getPrepayid(xml); // h5 param Map signMap = new HashMap(); model.addAttribute(&quot;appId&quot;, appId); model.addAttribute(&quot;timeStamp&quot;, timestamp); model.addAttribute(&quot;package&quot;, &quot;prepay_id=&quot; + prepayid); model.addAttribute(&quot;nonceStr&quot;, nonceStr); model.addAttribute(&quot;signType&quot;, &quot;MD5&quot;); signMap.put(&quot;appId&quot;, appId); signMap.put(&quot;timeStamp&quot;, timestamp); signMap.put(&quot;package&quot;, &quot;prepay_id=&quot; + prepayid); signMap.put(&quot;signType&quot;, &quot;MD5&quot;); signMap.put(&quot;nonceStr&quot;, nonceStr); String paySignH5 = MD5SignUtil.sign(CommonUtil.FormatBizQueryParaMap(signMap), paternerKey); model.addAttribute(&quot;paySign&quot;, paySignH5); String url = String.format(&quot;checkout/partials/wechatPayForm&quot;, model); return url; } } äº¤äº’æ‰€éœ€å‚æ•°ç”Ÿæˆå·¥å…·ç±»CommonUtilHttpClientUtilMD5SignUtilMD5UtilMapKeyComparatorUtilPayUtil CommonUtil.java1234567891011121314151617181920212223242526272829303132333435363738 import java.util.*; public class CommonUtil { // è½¬æ¢ public static String ArrayToXml(Map&lt;String, String&gt; arr) { String xml = &quot;&lt;xml&gt;&quot;; Iterator&lt;Map.Entry&lt;String, String&gt;&gt; iter = arr.entrySet().iterator(); while (iter.hasNext()) { Map.Entry&lt;String, String&gt; entry = iter.next(); String key = entry.getKey(); String val = entry.getValue(); xml += &quot;&lt;&quot; + key + &quot;&gt;&quot; + val + &quot;&lt;/&quot; + key + &quot;&gt;&quot;; } xml += &quot;&lt;/xml&gt;&quot;; return xml; } // å­—å…¸æ’åº public static String FormatBizQueryParaMap(Map map) throws Exception { StringBuffer sb = new StringBuffer(); if (map == null || map.isEmpty()) { return null; } Map&lt;String, String&gt; sortMap = new TreeMap&lt;String, String&gt;(new MapKeyComparatorUtil()); sortMap.putAll(map); Map&lt;String, String&gt; resultMap = sortMap; for (Map.Entry&lt;String, String&gt; entry : resultMap.entrySet()) { sb.append(entry.getKey() + &quot;=&quot; + entry.getValue() + &quot;&amp;&quot;); } return sb.toString().substring(0,sb.toString().length()-1); }} HttpClientUtil.java123456789101112131415161718192021222324import org.apache.commons.httpclient.methods.PostMethod;public class HttpClientUtil { private static HttpClientUtil instance = null; private HttpClientUtil() { } public static HttpClientUtil getInstance() { if (instance == null) { instance = new HttpClientUtil(); } return instance; } // å‘é€ postè¯·æ±‚ // @param httpUrl åœ°å€ public PostMethod postMethod(String httpUrl) { PostMethod postMethod=new PostMethod(httpUrl);// åˆ›å»ºhttpPost return postMethod; }} MD5SignUtil.java1234567public class MD5SignUtil { public static String sign(String content, String key) throws Exception { String signStr = content + &quot;&amp;key=&quot; + key; return MD5Util.MD5(signStr).toUpperCase(); }} MD5Util.java1234567891011121314151617181920212223242526import java.security.MessageDigest;public class MD5Util { public final static String MD5(String s) { char hexDigits[]={'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'}; try { byte[] btInput = s.getBytes(); MessageDigest mdInst = MessageDigest.getInstance(&quot;MD5&quot;); mdInst.update(btInput); byte[] md = mdInst.digest(); int j = md.length; char str[] = new char[j * 2]; int k = 0; for (int i = 0; i &lt; j; i++) { byte byte0 = md[i]; str[k++] = hexDigits[byte0 &gt;&gt;&gt; 4 &amp; 0xf]; str[k++] = hexDigits[byte0 &amp; 0xf]; } return new String(str); } catch (Exception e) { e.printStackTrace(); return null; } }} MapKeyComparatorUtil.java123456789import java.util.Comparator;public class MapKeyComparatorUtil implements Comparator&lt;String&gt; { @Override public int compare(String o1, String o2) { return o1.compareTo(o2); }} PayUtil.java12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273import org.apache.commons.httpclient.HttpClient;import org.apache.commons.httpclient.SimpleHttpConnectionManager;import org.apache.commons.httpclient.methods.PostMethod;import org.apache.commons.httpclient.params.HttpClientParams;import org.apache.commons.logging.Log;import org.apache.commons.logging.LogFactory;import org.codehaus.jettison.json.JSONObject;import java.io.IOException;import java.io.InputStream;import java.util.Random;public class PayUtil { private static Log log = LogFactory.getLog(PayUtil.class); public static String URL = &quot;https://api.mch.weixin.qq.com/pay/unifiedorder&quot;; public String getPrepayid(String xml) { log.warn(xml); try { JSONObject jo = getPrepayJson(xml); JSONObject element = jo.getJSONObject(&quot;xml&quot;); String prepayid = (element.get(&quot;prepay_id&quot;)).toString(); return prepayid.substring(1, prepayid.length() - 1); } catch (Exception e) { e.printStackTrace(); } return null; } @SuppressWarnings(&quot;deprecation&quot;) public JSONObject getPrepayJson(String xml) { HttpClient httpClient = new HttpClient(new HttpClientParams(), new SimpleHttpConnectionManager(true)); InputStream is = null; PostMethod method = null; try { method = HttpClientUtil.getInstance().postMethod(URL); method.setRequestBody(xml); method.getParams().setContentCharset(&quot;UTF-8&quot;); // UTF-8 httpClient.executeMethod(method); //è¯»å–å“åº” is = method.getResponseBodyAsStream(); JSONObject o = XmlJsonUtil.xmlJSON(is); return o; } catch (Exception e) { e.printStackTrace(); } finally { if (method != null) { method.releaseConnection(); } if (is != null) { try { is.close(); } catch (IOException e1) { e1.printStackTrace(); } } } return null; } // @return time&amp;randomNum public String orderNum() { String chars = &quot;0123456789&quot;; String order = System.currentTimeMillis() + &quot;&quot;; String res = &quot;&quot;; for (int i = 0; i &lt; 19; i++) { Random rd = new Random(); res += chars.charAt(rd.nextInt(chars.length() - 1)); } order += res; return order; }} æ”¯ä»˜æˆåŠŸå‘é€æ¨¡ç‰ˆæ¶ˆæ¯123456789101112131415161718192021// wechat shopping receipt// å‘é€æ¨¡ç‰ˆæ¶ˆæ¯// @param openId// @param pricepublic void sendShoppingReceipt(String openId, String price) { WxMpTemplateMessage wxMpTemplateMessage = new WxMpTemplateMessage(); wxMpTemplateMessage.setToUser(openId); wxMpTemplateMessage.setTemplateId(&quot;VTevmK1xd15sAlMPOmna1bXnh-l46Epw9DwrqHvkKVo&quot;); // æ¨¡ç‰ˆID wxMpTemplateMessage.setUrl(&quot;bige.t.beeoz.com/#/owncourse&quot;);// user center page wxMpTemplateMessage.setTopColor(&quot;#173177&quot;); wxMpTemplateMessage.getDatas().add(new WxMpTemplateData(&quot;first&quot;, &quot;è´­ä¹°æˆåŠŸ&quot;, &quot;#173177&quot;)); wxMpTemplateMessage.getDatas().add(new WxMpTemplateData(&quot;product&quot;, &quot;åœ¨çº¿è¯¾ç¨‹&quot;, &quot;#173177&quot;)); wxMpTemplateMessage.getDatas().add(new WxMpTemplateData(&quot;price&quot;, price, &quot;#173177&quot;)); wxMpTemplateMessage.getDatas().add(new WxMpTemplateData(&quot;time&quot;, System.currentTimeMillis() + &quot;&quot;, &quot;#173177&quot;)); wxMpTemplateMessage.getDatas().add(new WxMpTemplateData(&quot;remark&quot;, &quot;å¦‚æœ‰ç–‘é—®ï¼Œè¯·å’¨è¯¢å…¬ä¼—å·å®¢æœ&quot;, &quot;#173177&quot;)); try { WeChatConnector.getMpService().templateSend(wxMpTemplateMessage); } catch (WxErrorException e) { e.printStackTrace(); }}","link":"/2016/01/10/%E5%BE%AE%E4%BF%A1H5%E6%94%AF%E4%BB%98/"},{"title":"æ•°æ®åº“ä¸­çš„count","text":"count(*) å’Œ count(1)å’Œcount(åˆ—å)åŒºåˆ« æ‰§è¡Œæ•ˆæœä¸Šï¼š â€¢ count(*)åŒ…æ‹¬äº†æ‰€æœ‰çš„åˆ—ï¼Œç›¸å½“äºè¡Œæ•°ï¼Œåœ¨ç»Ÿè®¡ç»“æœçš„æ—¶å€™ï¼Œä¸ä¼šå¿½ç•¥åˆ—å€¼ä¸ºNULL â€¢ count(1)åŒ…æ‹¬äº†å¿½ç•¥æ‰€æœ‰åˆ—ï¼Œç”¨1ä»£è¡¨ä»£ç è¡Œï¼Œåœ¨ç»Ÿè®¡ç»“æœçš„æ—¶å€™ï¼Œä¸ä¼šå¿½ç•¥åˆ—å€¼ä¸ºNULL â€¢ count(åˆ—å)åªåŒ…æ‹¬åˆ—åé‚£ä¸€åˆ—ï¼Œåœ¨ç»Ÿè®¡ç»“æœçš„æ—¶å€™ï¼Œä¼šå¿½ç•¥åˆ—å€¼ä¸ºç©ºï¼ˆè¿™é‡Œçš„ç©ºä¸æ˜¯åªç©ºå­—ç¬¦ä¸²æˆ–è€…0ï¼Œè€Œæ˜¯è¡¨ç¤ºnullï¼‰çš„è®¡æ•°ï¼Œå³æŸä¸ªå­—æ®µå€¼ä¸ºNULLæ—¶ï¼Œä¸ç»Ÿè®¡ã€‚ æ‰§è¡Œæ•ˆç‡ä¸Šï¼š â€¢ åˆ—åä¸ºä¸»é”®ï¼Œcount(åˆ—å)ä¼šæ¯”count(1)å¿« â€¢ åˆ—åä¸ä¸ºä¸»é”®ï¼Œcount(1)ä¼šæ¯”count(åˆ—å)å¿« â€¢ å¦‚æœè¡¨å¤šä¸ªåˆ—å¹¶ä¸”æ²¡æœ‰ä¸»é”®ï¼Œåˆ™ countï¼ˆ1ï¼‰ çš„æ‰§è¡Œæ•ˆç‡ä¼˜äº countï¼ˆï¼‰ â€¢ å¦‚æœæœ‰ä¸»é”®ï¼Œåˆ™ select countï¼ˆä¸»é”®ï¼‰çš„æ‰§è¡Œæ•ˆç‡æ˜¯æœ€ä¼˜çš„ â€¢ å¦‚æœè¡¨åªæœ‰ä¸€ä¸ªå­—æ®µï¼Œåˆ™ select countï¼ˆï¼‰æœ€ä¼˜ã€‚","link":"/2020/11/22/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84count/"},{"title":"æ ‘è“æ´¾æ¸©æ¹¿åº¦ç›‘ç£ç©å…·","text":"åŸºäº Rasperry Pi 3B and Arduino å…¬å¸ä¸ºäº†é˜²æ­¢å¤å¤©æœºæˆ¿æ¸©åº¦è¿‡é«˜ï¼Œéœ€è¦ä¸€ä¸ªæ¸©åº¦ç›‘æµ‹å·¥å…·ï¼Œå…¶å®å¸‚é¢ä¸Šçš„å°ç±³æ¸©åº¦ç›‘æµ‹åªè¦35å—ï¼Œä½†æ˜¯æƒ³ç€å¯è‡ªå®šä¹‰æ‰©å±•çš„éœ€è¦ï¼Œå°±åšäº†ä¸€ä¸ªä»ç¡¬ä»¶åˆ°è½¯ä»¶çš„æ¸©æ¹¿åº¦ç›‘æµ‹ç³»ç»Ÿï¼Œå¥½åœ¨ç”¨äº†ä¸€ä¸ªå‘¨æœ«åšå‡ºæ¥äº†ï¼Œè€ƒè™‘åˆ°ä¹‹åè¿˜è¦å¢åŠ ç”µå‹è­¦å‘Šç­‰åŠŸèƒ½ï¼Œé€‰å‹å¦‚ä¸‹ï¼š å¼€å‘æ¿ï¼šï¼ˆæ¥è‡ªä¸‡èƒ½çš„å¤§æ·˜å®ï¼‰ Rasberry Pi 3Bï¼šä¸­å¤®æ§åˆ¶æœåŠ¡å™¨ï¼Œè´Ÿè´£ä¸äº’è”ç½‘çš„é€šä¿¡ã€é‡‡æ ·å­˜å‚¨ Arduino ä¸ŠæŠ¥çš„çŠ¶æ€æ•°æ®ã€æä¾›/è°ƒç”¨APIä»¥æ–¹ä¾¿ç”¨å…¶ä»–ç»ˆç«¯æ§åˆ¶ã€‚ Arduino UNOï¼šè´Ÿè´£ä¼ æ„Ÿå™¨é‡‡æ ·ï¼Œå’Œ RPi è¿›è¡Œé€šä¿¡ã€‚ æ¸©åº¦ä¼ æ„Ÿå™¨ï¼šDHT22 è¯­è¨€ï¼šPython3,Java8 å­˜å‚¨ï¼šMysql,Redis Arduino1234567891011121314151617181920#include &quot;DHT.h&quot;DHT dht(2, DHT22);void setup(){ Serial.begin(9600); dht.begin();}void loop(){ float humidity = dht.readHumidity(); float temperature = dht.readTemperature(); Serial.print(&quot;Humidity: &quot;); Serial.print(humidity); Serial.print(&quot; &quot;); Serial.print(&quot;Temperature: &quot;); Serial.println(temperature); delay(2000);} RasberryPi 3Bå®‰è£…ç³»ç»Ÿé•œåƒ:raspbian-stretch-litemicroSDå¡:16Gï¼Œæ¨è8Gä»¥ä¸Š å°†SDå¡æ ¼å¼åŒ–:(Mac)ç£ç›˜å·¥å…·â€“&gt;æŠ¹æ‰â€“&gt;MS-DOS(FAT)â€“&gt;æŠ¹æ‰ ç»ˆç«¯df-hæŸ¥çœ‹æŒ‚è½½ï¼ŒSD å¡å‡è®¾ä¸º /dev/disk2s1 å¸è½½ SD å¡diskutil unmount /dev/disk2s1 diskutil list ç¡®è®¤ /dev/disk2 ä¸‹çš„ disk2 å®˜ç½‘ä¸‹è½½é•œåƒï¼Œå†™å…¥ SD å¡sudo dd bs=4m if=æœ¬æœºé•œåƒè·¯å¾„ of=/dev/disk2æŸ¥çœ‹è¿›åº¦å¯ä»¥å¦èµ·ç»ˆç«¯ sudo kill -INFO $(pgrep ^dd) ç”±äºæ ‘è“æ´¾é»˜è®¤ä¸å¼€å¯ sshï¼Œå†™å…¥æˆåŠŸååœ¨ /boot/ åˆ›å»ºæ— åç¼€çš„æ–‡ä»¶åä¸º ssh çš„æ–‡ä»¶ è®¾ç½®è‡ªåŠ¨è¿æ¥ Wi-Fi:åœ¨ /boot/ ä¸‹åˆ›å»º wpa_supplicant.conf 12345678country=CNctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdevupdate_config=1network={ scan_ssid=1#SSIDè¢«éšè—æ—¶è®¾ç½® ssid=&quot;TaiGe&quot;#Wi-Fiå psk=&quot;HaoyunHu888&quot;#Wi-Fiå¯†ç } å¼¹å‡ºSDå¡diskutil unmountDisk /dev/disk2 ä»¥ä¸Šï¼ŒRasberryPiçš„ç³»ç»Ÿå®‰è£…å®Œæˆï¼Œå¯ä»¥å°†SDå¡æ’å…¥å¼€å‘ç‰ˆä¸Šç”µå¼€æœºäº† ç™»å½•ç³»ç»ŸSSH12ssh pi@ipdefault password: raspberry é€šè¿‡è·¯ç”±å™¨æŸ¥çœ‹æ ‘è“æ´¾çš„å½“å‰ip: æ‰“å¼€ç½‘é¡µ192.168.1.1ï¼Œç™»å½•ç³»ç»Ÿ çŠ¶æ€/ç”¨æˆ·ä¾§ä¿¡æ¯/ä»¥å¤ªç½‘æ¥å£ä¿¡æ¯/ï¼Œæ‰¾åˆ°å®¢æˆ·ç«¯åç§°ä¸ºraspberrypiçš„IPåœ°å€å…³æœºsudo shutdown -h nowï¼Œé‡æ–°ä¸Šç”µåä¼šè‡ªåŠ¨å¼€æœº ç³»ç»Ÿå®‰è£…å‚è€ƒ æŸ¥çœ‹rpiIPå‚è€ƒ RaspberryPiè¯»å–Arduinoæ•°æ®å®‰è£…Python31sudo aptitude install python-dev å®‰è£…Pythonçš„GPIOæ¨¡å—ç”¨äºæ§åˆ¶LEDã€ç”µæœºç­‰ 12sudo apt-get install rpi.gpio å®‰è£…Serialç”¨äºä¸²å£é€šä¿¡åŠUSBé€šä¿¡sudo apt-get install python-serial å®‰è£…ä¸²å£è°ƒè¯•ç¨‹åºminicomæ˜¯linuxå¹³å°ä¸²å£è°ƒè¯•å·¥å…·ï¼Œå¯ä»¥ç”¨å®ƒæ¥è¯»å–Arduinoé€šè¿‡USBä¸²å£å‘é€çš„ä¼ æ„Ÿå™¨æ•°å€¼ã€‚ åœ¨RaspberryPiä¸Šå®‰è£…minicomï¼šsudo apt-get install minicom é…ç½®minicomï¼š minicomå¯åŠ¨ï¼šminicom -b 9600 -D /dev/ttyACM0 -bä»£è¡¨æ³¢ç‰¹ç‡ -Dä»£è¡¨ç«¯å£ /dev/ttyACM0 ä»£è¡¨æ‰“å¼€ä¸Arduinoç›¸è¿çš„ç«¯å£ Pythonæ‰“å°æ•°æ®show.py 123456import serialser = serial.Serial('/dev/ttyACM0',9600)info = ser.readline()while info: print(info) info = ser.readline() Pythonè°ƒç”¨http APIå®‰è£…requestssudo pip install requests åå°è¿è¡Œpyè„šæœ¬nohup python api.py &amp;","link":"/2018/05/10/%E6%A0%91%E8%8E%93%E6%B4%BE%E6%B8%A9%E6%B9%BF%E5%BA%A6%E7%9B%91%E7%9D%A3%E7%8E%A9%E5%85%B7/"},{"title":"ç‰ˆæœ¬å‘½åè§„èŒƒ","text":"ä¸Šå®¶å…¬å¸åœ¨å‘ç‰ˆæ—¶å¯¹tagçš„å‘½åä¸€ç›´ä¸æ˜¯å¾ˆè§„èŒƒï¼Œå‚è€ƒäº†å„å¤§ç½‘ç«™åŠåšå®¢ä¸Šçš„è¯´æ˜ï¼Œåšä¸ªç¬”è®°ã€‚ ç‰ˆæœ¬å·æ ¼å¼ï¼šå¸¸è§æ ¼å¼ï¼š[name].A.B.C-[state]nameï¼šå¯é€‰å­—æ®µ,ä¸€èˆ¬ä¸º v,è¡¨ç¤º versionï¼›Aï¼šMajorä¸»ç‰ˆæœ¬å·ï¼Œä¸€èˆ¬å½“è½¯ä»¶æ•´ä½“é‡å†™ï¼Œæˆ–å½“APIå…¼å®¹æ€§å˜åŒ–æ—¶é€’å¢ï¼›Bï¼šMinoræ¬¡ç‰ˆæœ¬å·ï¼Œå½“å¢åŠ åŠŸèƒ½æ—¶ï¼ˆAPIå…¼å®¹æ€§ä¸å˜åŒ–ï¼‰é€’å¢ï¼›Cï¼šPatchä¿®è®¢å·ï¼ŒBugä¿®å¤æ—¶ï¼ˆAPIå…¼å®¹æ€§ä¸å˜åŒ–ï¼‰é€’å¢ï¼›stateï¼šå¯é€‰å­—æ®µ,è¡¨ç¤ºç‰ˆæœ¬çŠ¶æ€ï¼Œç”¨alphaç­‰ä¿®é¥°è¯ Detail Aï¼ŒBï¼ŒCä¸ºéè´Ÿæ•´æ•°ï¼Œä¸”ä¸å¾—åŒ…å«å‰å¯¼0ï¼ŒæŒ‰æ•°å€¼é€’å¢ã€‚ğŸŒ°1.2.0-&gt;1.3.0-&gt;1.4.0 0.B.Cè¡¨ç¤ºå¤„äºå¼€å‘é˜¶æ®µï¼ŒAPIä¸ç¨³å®šï¼Œ1.0.0è¡¨æ˜å·²æœ‰ç¨³å®šç‰ˆæœ¬API å½“APIå…¼å®¹æ€§å˜åŒ–æ—¶ï¼ŒA++ï¼ŒB=C=0; å½“åŠŸèƒ½æ–°å¢æˆ–APIæ ‡è®°ä¸ºdeprecatedå¼ƒç”¨æ—¶ï¼ŒB++ï¼ŒC=0ï¼› å½“Bug Fixæ—¶ï¼ŒC++ï¼› å…ˆè¡Œç‰ˆæœ¬å·ï¼ˆPre-releaseï¼‰è¡¨ç¤ºè¯¥ç‰ˆæœ¬ä¸ç¨³å®šï¼Œå¯èƒ½æœ‰å…¼å®¹é—®é¢˜ã€‚æ ¼å¼1.0.0.[a-c][æ­£æ•´æ•°]ğŸŒ°1.0.0.a3 1.0.0.b89 1.0.0.c1999008 å¼€å‘ç‰ˆæœ¬å·å¤šç”¨äºCI-CDï¼Œæ ¼å¼A.B.C.dev[æ­£æ•´æ•°]ã€‚ğŸŒ°1.0.1.dev5 ç‰ˆæœ¬å·æ’åºè§„åˆ™ï¼š ä¸»ç‰ˆæœ¬å·ï¼Œæ¬¡ç‰ˆæœ¬å·ï¼Œä¿®è®¢å·ğŸŒ°1.0.0&lt;1.0.1&lt;1.1.1&lt;2.0.0 å¯¹å…ˆè¡Œç‰ˆæœ¬å·ä¸å¼€å‘ç‰ˆæœ¬å·ğŸŒ°1.0.0.a10&lt;1.0.0 2.1.0.dev2&lt;2.1.0 å­˜åœ¨å­—æ¯ï¼ŒæŒ‰ASCIIç æ’åºğŸŒ°1.0.0.a10&lt;1.0.0.b10 Tip:ç‰ˆæœ¬ä¸€ç»å‘å¸ƒï¼Œä¸å¾—ä¿®æ”¹ï¼ ä¿®é¥°è¯ alpha å†…éƒ¨ç‰ˆæœ¬ beta æµ‹è¯•ç‰ˆ demo æ¼”ç¤ºç‰ˆ enhance å¢å¼ºç‰ˆ free è‡ªç”±ç‰ˆ full version å®Œæ•´ç‰ˆï¼Œæ­£å¼ç‰ˆ lts é•¿æœŸç»´æŠ¤ç‰ˆ release å‘è¡Œç‰ˆ rc å³å°†æ­£å¼å‘å¸ƒ standard æ ‡å‡†ç‰ˆ ultimate æ——èˆ°ç‰ˆ upgrade å‡çº§ç‰ˆ å‚è€ƒï¼š è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0 ç†è§£ç‰ˆæœ¬å‘½ååŠé™å®šè§„åˆ™ ã€Šè½¯ä»¶å·¥ç¨‹ã€‹ç¬¬åç‰ˆ ç¬¬25ç«  ISBNï¼š9787111589105","link":"/2018/03/07/%E7%89%88%E6%9C%AC%E5%91%BD%E5%90%8D/"},{"title":"Springboot2.0çš„å¯åŠ¨è¯¦è§£","text":"æŠ„è¢­è‡ª:Spring Boot1.3.3å¯åŠ¨æµç¨‹è¯¦è§£ 0.å…ˆæ¥è¯´è¯´å¯åŠ¨ç±»çš„æ³¨è§£123456@SpringBootApplicationpublic class LearnApplication { public static void main(String[] args) { SpringApplication.run(LearnApplication.class, args); }} å…¶ä¸­ï¼Œç±»æ³¨è§£@SpringBootApplicationçš„å®ç°ä¸º 123456789101112@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)@Documented@Inherited@SpringBootConfiguration@EnableAutoConfiguration@ComponentScan(excludeFilters = { @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class), @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })public @interface SpringBootApplication { } å…¶ä¸­ï¼Œ@SpringBootConfiguration,@EnableAutoConfigurationå’Œ@ComponentScanä¸ºä¸»è¦æ³¨è§£ï¼Œç”¨è¿™ä¸‰ä¸ªæ³¨è§£ä»£æ›¿å¯åŠ¨ç±»ä¸Šçš„@SpringBootApplicationä¹Ÿèƒ½ä½¿å·¥ç¨‹æ­£å¸¸è¿è¡Œã€‚ è¯¦è§£@SpringBootConfigurationï¼Œ@EnableAutoConfigurationå’Œ@ComponentScanä¸‰ä¸ªæ³¨è§£ä¸»è¦åšä¸€ä»¶äº‹ï¼šæ³¨å†Œbeanåˆ°springå®¹å™¨ï¼Œé€šè¿‡ä¸åŒæ¡ä»¶ä¸åŒæ–¹å¼æ¥å®Œæˆã€‚ @SpringBootConfiguration å…¶åº•å±‚ä¸º 1234567@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)@Documented@Configurationpublic @interface SpringBootConfiguration {} 123456 ```@Configuration```æ˜¯ç­‰åŒäºStringçš„xmlæ–‡ä»¶é…åˆ```@Bean```æ³¨è§£ï¼Œå¯ä»¥é…ç½®éœ€è¦Springå®¹å™¨ç®¡ç†çš„beanã€‚ * è‡ªåŠ¨é…ç½® @EnableAutoConfiguration æ³¨è§£æºç  @Target(ElementType.TYPE) @Retention(RetentionPolicy.RUNTIME) @Documented @Inherited @AutoConfigurationPackage // ä¸»è¦æ³¨è§£ï¼Œé€šè¿‡å¯¼å…¥æ–¹å¼ï¼Œå°†åˆ¶å®šclassæ³¨å†Œåˆ°Springå®¹å™¨ @Import(AutoConfigurationImportSelector.class) public @interface EnableAutoConfiguration { } 1234567 ```@EnableAutoConfiguration```ä»classpathä¸­æœç´¢æ‰€æœ‰çš„```META-INF/spring.factories```é…ç½®æ–‡ä»¶ï¼Œå°†```org.springframework.boot.autoconfigure.EnableutoConfiguration```å¯¹åº”çš„é…ç½®é¡¹é€šè¿‡åå°„å®ä¾‹åŒ–ä¸ºå¯¹åº”æ ‡æ³¨äº†```@Configuartion```çš„JavaConfigå½¢å¼çš„IoCå®¹å™¨é…ç½®ç±»ï¼Œæ±‡æ€»æˆä¸€ä¸ªï¼ŒåŠ è½½åˆ°IoCå®¹å™¨ã€‚* ç»„ä»¶æ‰«æ @ComponentScan æ³¨è§£æºç  @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.TYPE) @Documented @Repeatable(ComponentScans.class) public @interface ComponentScan { // å¯¹åº”çš„åŒ…æ‰«æè·¯å¾„ @AliasFor(&quot;basePackages&quot;) String[] value() default {}; // å¯¹åº”çš„åŒ…æ‰«æè·¯å¾„ @AliasFor(&quot;value&quot;) String[] basePackages() default {}; // æŒ‡å®šå…·ä½“æ‰«æç±» Class&lt;?&gt;[] basePackageClasses() default {}; // å¯¹åº”beanåç§°ç”Ÿæˆå™¨ï¼Œé»˜è®¤BeanNameGenerator.class Class&lt;? extends BeanNameGenerator&gt; nameGenerator() default BeanNameGenerator.class; // å¯¹åº”ç›‘æµ‹åˆ°çš„beançš„scopeèŒƒå›´ Class&lt;? extends ScopeMetadataResolver&gt; scopeResolver() default AnnotationScopeMetadataResolver.class; // ä¸ºç›‘æµ‹åˆ°çš„ç»„ä»¶ç”Ÿæˆä»£ç† ScopedProxyMode scopedProxy() default ScopedProxyMode.DEFAULT; // æ§åˆ¶ç¬¦åˆç»„ä»¶æ£€æµ‹æ¡ä»¶çš„ç±»æ–‡ä»¶ï¼Œé»˜è®¤åœ¨åŒ…æ‰«æä¸‹ String resourcePattern() default ClassPathScanningCandidateComponentProvider.DEFAULT_RESOURCE_PATTERN; // æ˜¯å¦å¯¹å¸¦@Componentï¼Œ@Repositoryï¼Œ@Serviceï¼Œ@Controllerè‡ªåŠ¨æ£€æµ‹ï¼Œé»˜è®¤å¼€å¯ boolean useDefaultFilters() default true; // æŒ‡å®šå®šä¹‰Filteræ»¡è¶³æ¡ä»¶çš„ç»„ä»¶ Filter[] includeFilters() default {}; // æ’é™¤å®šä¹‰Filterä¸æ»¡è¶³æ¡ä»¶çš„ç»„ä»¶ Filter[] excludeFilters() default {}; // æ‰«æåˆ°çš„ç±»è¿›è¡Œæ‡’åŠ è½½ï¼Œé»˜è®¤å…³é—­ boolean lazyInit() default false; } 12345678 ```@ComponentScan```è¯¥æ³¨è§£å‘ŠçŸ¥Springè¦æ‰«æé‚£äº›ç±»æˆ–åŒ…ï¼Œé»˜è®¤æ‰«æè¯¥æ³¨è§£æ‰€åœ¨åŒ…åŠå­åŒ…ä¸‹æ‰€æœ‰ç±»ã€‚ æ‰€ä»¥åœ¨SpringBooté¡¹ç›®ä¸­ï¼Œå¯åŠ¨ç±»æ”¾åœ¨é¡¶å±‚ç›®å½•ä¸­ï¼Œä»¥ä¾¿æ‰«æåˆ°æ‰€æœ‰ç±»ã€‚ æ‰«æç‰¹å®šæ³¨è§£æ³¨é‡Šçš„ç±»ï¼Œå°†å…¶æ³¨å†Œåˆ°Springå®¹å™¨ä¸­ã€‚### 1.ç”±å¦‚ä¸‹ä»£ç å¯åŠ¨åœ¨è¿™ä¸ªmainæ–¹æ³•ä¸­ï¼Œè°ƒç”¨äº†SpringApplicationçš„é™æ€runæ–¹æ³•ï¼Œå¹¶å°†Applicationç±»å¯¹è±¡å’Œmainæ–¹æ³•çš„å‚æ•°argsä½œä¸ºå‚æ•°ä¼ é€’äº†è¿›å»ã€‚ public static void main(String[] args) { SpringApplication.run(DemoApplication.class, args);} 12### 2.åœ¨è¿™ä¸ªé™æ€æ–¹æ³•ä¸­ï¼Œåˆ›å»ºSpringApplicationå¯¹è±¡ï¼Œå¹¶è°ƒç”¨è¯¥å¯¹è±¡çš„runæ–¹æ³•ã€‚ public static ConfigurableApplicationContext run(Class&lt;?&gt; primarySource, Stringâ€¦ args) { return run(new Class[]{primarySource}, args);} public static ConfigurableApplicationContext run(Class&lt;?&gt;[] primarySources, String[] args) { return (new SpringApplication(primarySources)).run(args);} 12345678910### 3.è¿›å…¥SpringApplicationç±»ä¸­çœ‹åˆ° æ„é€ å‡½æ•°ä¸­ï¼Œåˆå§‹åŒ–SpringApplicationå¯¹è±¡çš„æˆå‘˜å˜é‡ï¼š* `resourceLoader `:ç”±ä¼ å‚è·å¾—* `primarySources`:ç”±ä¼ å‚è·å¾—* `webApplicationType`* `initializers`* `listeners`* `mainApplicationClass` /** * Create a new {@link SpringApplication} instance. The application context will load * beans from the specified primary sources (see {@link SpringApplication class-level} * documentation for details. The instance can be customized before calling */ public SpringApplication(Class&lt;?&gt;... primarySources) { this(null, primarySources); } /** * Create a new {@link SpringApplication} instance. The application context will load * beans from the specified primary sources (see {@link SpringApplication class-level} * documentation for details. The instance can be customized before calling */ @SuppressWarnings({ &quot;unchecked&quot;, &quot;rawtypes&quot; }) public SpringApplication(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources) { this.resourceLoader = resourceLoader; Assert.notNull(primarySources, &quot;PrimarySources must not be null&quot;); this.primarySources = new LinkedHashSet&lt;&gt;(Arrays.asList(primarySources)); this.webApplicationType = deduceWebApplicationType(); setInitializers((Collection) getSpringFactoriesInstances( ApplicationContextInitializer.class)); setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class)); this.mainApplicationClass = deduceMainApplicationClass(); } 123#### 3.1 webApplicationTypeï¼šé€šè¿‡ç±»åˆ¤æ–­åº”ç”¨ç±»å‹ /** * The class name of application context that will be used by default for reactive web * environments. */ public static final String DEFAULT_REACTIVE_WEB_CONTEXT_CLASS = &quot;org.springframework.&quot; + &quot;boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext&quot;; private static final String REACTIVE_WEB_ENVIRONMENT_CLASS = &quot;org.springframework.&quot; + &quot;web.reactive.DispatcherHandler&quot;; private static final String MVC_WEB_ENVIRONMENT_CLASS = &quot;org.springframework.&quot; + &quot;web.servlet.DispatcherServlet&quot;; public SpringApplication(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources) { ... this.webApplicationType = deduceWebApplicationType(); ... } 123`deduceWebApplicationType`æ–¹æ³•è¿”å›çš„æ˜¯`WebApplicationType`ï¼ˆè¡¨ç¤ºwebåº”ç”¨ç±»å‹çš„æšä¸¾ç±»ï¼‰ï¼Œé€šè¿‡æŸ¥çœ‹ç±»æ˜¯å¦å­˜åœ¨æ•°ç»„ä¸­æ‰€åŒ…å«çš„ç±»æ¥åˆ¤æ–­åº”ç”¨ç±»å‹ private WebApplicationType deduceWebApplicationType() { // å“åº”å¼webåº”ç”¨ if (ClassUtils.isPresent(REACTIVE_WEB_ENVIRONMENT_CLASS, null) &amp;&amp; !ClassUtils.isPresent(MVC_WEB_ENVIRONMENT_CLASS, null)) { return WebApplicationType.REACTIVE; } for (String className : WEB_ENVIRONMENT_CLASSES) { // ä¸æ˜¯webåº”ç”¨ if (!ClassUtils.isPresent(className, null)) { return WebApplicationType.NONE; } } // åŸºäºservletçš„webåº”ç”¨ return WebApplicationType.SERVLET; } 1234#### 3.2 setInitializersï¼šè®¾ç½®initializersæˆå‘˜å˜é‡ public SpringApplication(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources) { ... setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class)); ... } /** * Sets the {@link ApplicationContextInitializer} that will be applied to the Spring */ public void setInitializers( Collection&lt;? extends ApplicationContextInitializer&lt;?&gt;&gt; initializers) { this.initializers = new ArrayList&lt;&gt;(); this.initializers.addAll(initializers); } 1234è°ƒç”¨`getSpringFactoriesInstances`è·å–`ApplicationContextInitializer`ç±»å‹å¯¹è±¡çš„åˆ—è¡¨ï¼Œè¯¥æ–¹æ³•ä¸­ï¼Œé€šè¿‡`SpringFactoriesLoader.loadFactoryNames(type, classLoader)`è·å–æ‰€æœ‰Spring Factoriesåå­—ï¼Œå†è°ƒç”¨`createSpringFactoriesInstances(type, parameterTypes, classLoader, args, names)`æ ¹æ®typeåˆ›å»ºå¯¹è±¡ï¼Œå†è¿”å›ä¸€ä¸ªList&lt;type&gt; private &lt;T&gt; Collection&lt;T&gt; getSpringFactoriesInstances(Class&lt;T&gt; type) { return getSpringFactoriesInstances(type, new Class&lt;?&gt;[] {}); } private &lt;T&gt; Collection&lt;T&gt; getSpringFactoriesInstances(Class&lt;T&gt; type, Class&lt;?&gt;[] parameterTypes, Object... args) { ClassLoader classLoader = Thread.currentThread().getContextClassLoader(); // ä½¿ç”¨åå­—ä¿è¯å”¯ä¸€æ€§ï¼Œé¿å…é‡å¤å†²çª Set&lt;String&gt; names = new LinkedHashSet&lt;&gt;( SpringFactoriesLoader.loadFactoryNames(type, classLoader)); List&lt;T&gt; instances = createSpringFactoriesInstances(type, parameterTypes, classLoader, args, names); AnnotationAwareOrderComparator.sort(instances); return instances; } 1 public static List&lt;String&gt; loadFactoryNames(Class&lt;?&gt; factoryClass, @Nullable ClassLoader classLoader) { String factoryClassName = factoryClass.getName(); return (List)loadSpringFactories(classLoader).getOrDefault(factoryClassName, Collections.emptyList()); } private static Map&lt;String, List&lt;String&gt;&gt; loadSpringFactories(@Nullable ClassLoader classLoader) { MultiValueMap&lt;String, String&gt; result = (MultiValueMap)cache.get(classLoader); if (result != null) { return result; } else { try { Enumeration&lt;URL&gt; urls = classLoader != null ? classLoader.getResources(&quot;META-INF/spring.factories&quot;) : ClassLoader.getSystemResources(&quot;META-INF/spring.factories&quot;); LinkedMultiValueMap result = new LinkedMultiValueMap(); while(urls.hasMoreElements()) { URL url = (URL)urls.nextElement(); UrlResource resource = new UrlResource(url); Properties properties = PropertiesLoaderUtils.loadProperties(resource); Iterator var6 = properties.entrySet().iterator(); while(var6.hasNext()) { Entry&lt;?, ?&gt; entry = (Entry)var6.next(); List&lt;String&gt; factoryClassNames = Arrays.asList(StringUtils.commaDelimitedListToStringArray((String)entry.getValue())); result.addAll((String)entry.getKey(), factoryClassNames); } } cache.put(classLoader, result); return result; } catch (IOException var9) { throw new IllegalArgumentException(&quot;Unable to load factories from location [META-INF/spring.factories]&quot;, var9); } } } 1234å…¶ä¸­ï¼ŒSpring Factoriesåå­—ä»å¦‚ä¸‹è·¯å¾„è¯»å– Enumeration urls = classLoader != null ? classLoader.getResources(â€œMETA-INF/spring.factoriesâ€) : ClassLoader.getSystemResources(â€œMETA-INF/spring.factoriesâ€); 123æˆå‘˜å˜é‡ä¼šè¢«åˆå§‹åŒ–ä¸ºå¦‚ä¸‹5ä¸ªç±»å¯¹è±¡ç»„æˆçš„list Application Context Initializersåˆå§‹åŒ–ApplicationContextï¼Œåœ¨refreshå‰è°ƒç”¨org.springframework.context.ApplicationContextInitializer=\\ ä¸ºApplicationContextæ·»åŠ æ£€æŸ¥é…ç½®ï¼Œå¹¶åœ¨å¸¸è§é”™è¯¯é…ç½®æ—¶æ‰“å°è­¦å‘Šä¿¡æ¯BeanFactoryPostProcessororg.springframework.boot.context.ConfigurationWarningsApplicationContextInitializer,\\ ä¸ºApplicationContextè®¾ç½®idorg.springframework.boot.context.ContextIdApplicationContextInitializer,\\ ä»ApplicationContextç¯å¢ƒé…ç½®ä¸­è¯»å–Initializerå¹¶åº”ç”¨org.springframework.boot.context.config.DelegatingApplicationContextInitializer,\\ ä¸ºApplicationContextè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿å•å…ƒæµ‹è¯•ä¸­ä½¿ç”¨æœåŠ¡å™¨æ­£ç›‘å¬çš„ç«¯å£å·org.springframework.boot.web.context.ServerPortInfoApplicationContextInitializer 123é€šè¿‡`createSpringFactoriesInstances`åˆ›å»ºApplicationContextInitializerå®ä¾‹ private &lt;T&gt; List&lt;T&gt; createSpringFactoriesInstances(Class&lt;T&gt; type, Class&lt;?&gt;[] parameterTypes, ClassLoader classLoader, Object[] args, Set&lt;String&gt; names) { List&lt;T&gt; instances = new ArrayList&lt;&gt;(names.size()); for (String name : names) { try { Class&lt;?&gt; instanceClass = ClassUtils.forName(name, classLoader); Assert.isAssignable(type, instanceClass); Constructor&lt;?&gt; constructor = instanceClass .getDeclaredConstructor(parameterTypes); T instance = (T) BeanUtils.instantiateClass(constructor, args); instances.add(instance); } catch (Throwable ex) { throw new IllegalArgumentException( &quot;Cannot instantiate &quot; + type + &quot; : &quot; + name, ex); } } return instances; } 12345#### 3.3 setListenersï¼šè®¾ç½®listenersæˆå‘˜å˜é‡listenersæˆå‘˜å˜é‡æ˜¯ApplicationListener&lt;?&gt;çš„é›†åˆ public SpringApplication(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources) { ... setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class)); ... } /** * Sets the {@link ApplicationListener}s that will be applied to the SpringApplication * and registered with the {@link ApplicationContext}. */ public void setListeners(Collection&lt;? extends ApplicationListener&lt;?&gt;&gt; listeners) { this.listeners = new ArrayList&lt;&gt;(); this.listeners.addAll(listeners); } 123å’Œæˆå‘˜å˜é‡initializersè°ƒç”¨ä¸€æ ·çš„æ–¹æ³•,æˆå‘˜å˜é‡ä¼šè¢«åˆå§‹åŒ–ä¸ºå¦‚ä¸‹10ä¸ªç±»å¯¹è±¡ç»„æˆçš„list Application Listenersè§‚å¯Ÿè€…æ¨¡å¼çš„ç›‘å¬å™¨æ¥å£ï¼Œç›‘å¬å„ç§ApplicationEventorg.springframework.context.ApplicationListener=\\ æ¸…ç¼“å­˜org.springframework.boot.ClearCachesApplicationListener,\\ çˆ¶contextå…³é—­ï¼Œå…³é—­å½“å‰ApplicationContextorg.springframework.boot.builder.ParentContextCloserApplicationListener,\\ å½“ç³»ç»Ÿå±æ€§System.encodingä¸é…ç½®çš„springç¼–ç ä¸åŒæ—¶ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ï¼Œå¹¶ç»ˆæ­¢ç³»ç»Ÿå¯åŠ¨org.springframework.boot.context.FileEncodingApplicationListener,\\ æ ¹æ®å±æ€§spring.output.ansi.enabledé…ç½®ANSIè¾“å‡ºï¼ˆå½©è‰²è¾“å‡ºæ—¥å¿—ï¼‰org.springframework.boot.context.config.AnsiOutputApplicationListener,\\ æœç´¢åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå¹¶æ ¹æ®é…ç½®æ–‡ä»¶è®¾ç½®Environmentä¸Applicationorg.springframework.boot.context.config.ConfigFileApplicationListener,\\ åŠ è½½å¹¶è½¬å‘äº‹ä»¶è‡³context.listener.classesä¸­é…ç½®çš„ApplicationLIstenerorg.springframework.boot.context.config.DelegatingApplicationListener,\\ ç¨‹åºæ­£å¸¸å¯åŠ¨æˆåŠŸï¼šå°†classpathæ‰“å°è‡³debugæ—¥å¿—ç¨‹åºæ­£å¸¸å¯åŠ¨å¤±è´¥ï¼šå°†classpathæ‰“å°è‡³infoæ—¥å¿—org.springframework.boot.context.logging.ClasspathLoggingApplicationListener,\\ æ ¹æ®é…ç½®ï¼Œé€‚å½“çš„æ—¶å€™åˆå§‹åŒ–ä¸é…ç½®æ—¥å¿—ç³»ç»Ÿorg.springframework.boot.context.logging.LoggingApplicationListener,\\ è‹¥classpathä¸­å­˜åœ¨ç±»liquibase.servicelocator.ServiceLocator,æ›¿æ¢æˆé€‚ç”¨äºspringbootçš„ç‰ˆæœ¬org.springframework.boot.liquibase.LiquibaseServiceLocatorApplicationListener 1234567#### 3.4 deduceMainApplicationClassï¼šåœ¨deduceMainApplicationClassæ–¹æ³•ä¸­ï¼Œé€šè¿‡è·å–å½“å‰è°ƒç”¨æ ˆï¼Œæ‰¾åˆ°å…¥å£æ–¹æ³•mainæ‰€åœ¨çš„ç±»ï¼Œå¹¶å°†å…¶å¤åˆ¶ç»™SpringApplicationå¯¹è±¡çš„æˆå‘˜å˜é‡mainApplicationClassï¼ˆå³åˆ›å»ºçš„`SpringApplication.class`ï¼‰ public SpringApplication(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources) { ... this.mainApplicationClass = deduceMainApplicationClass(); } private Class&lt;?&gt; deduceMainApplicationClass() { try { StackTraceElement[] stackTrace = new RuntimeException().getStackTrace(); for (StackTraceElement stackTraceElement : stackTrace) { // è·å–å½“å‰è°ƒç”¨æ ˆ if (&quot;main&quot;.equals(stackTraceElement.getMethodName())) { // æ‰¾åˆ°mainæ–¹æ³•æ‰€åœ¨ç±»å¹¶è¿”å› return Class.forName(stackTraceElement.getClassName()); } } } catch (ClassNotFoundException ex) { // Swallow and continue } return null; } 123### 4.SpringApplicationå¯¹è±¡çš„runæ–¹æ³•ä»¥ä¸Šä¸ºåˆå§‹åŒ–è¿‡ç¨‹ï¼Œå¾—åˆ°äº†ä¸€ä¸ªSpringApplicationå¯¹è±¡ï¼Œæ¥ä¸‹æ¥å°†è°ƒç”¨å…¶é™æ€`run`æ–¹æ³•ã€‚SpringApplicationå¯¹è±¡çš„runæ–¹æ³•åˆ›å»ºå¹¶åˆ·æ–°ApplicationContextï¼ŒæŒ‰ç…§æ‰§è¡Œé¡ºåºï¼Œä»‹ç»è¯¥æ–¹æ³•æ‰€åšçš„å·¥ä½œã€‚ public static ConfigurableApplicationContext run(Class&lt;?&gt;[] primarySources, String[] args) { return new SpringApplication(primarySources).run(args); } public ConfigurableApplicationContext run(String... args) { // StopWatchæ˜¯æ¥è‡ªorg.springframework.utilçš„å·¥å…·ç±»ï¼Œå¯ä»¥ç”¨æ¥æ–¹ä¾¿çš„è®°å½•ç¨‹åºçš„è¿è¡Œæ—¶é—´ StopWatch stopWatch = new StopWatch(); stopWatch.start(); ConfigurableApplicationContext context = null; Collection&lt;SpringBootExceptionReporter&gt; exceptionReporters = new ArrayList&lt;&gt;(); // è®¾ç½®headlessæ¨¡å¼ configureHeadlessProperty(); SpringApplicationRunListeners listeners = getRunListeners(args); listeners.starting(); try { ApplicationArguments applicationArguments = new DefaultApplicationArguments( args); ConfigurableEnvironment environment = prepareEnvironment(listeners, applicationArguments); configureIgnoreBeanInfo(environment); Banner printedBanner = printBanner(environment); context = createApplicationContext(); exceptionReporters = getSpringFactoriesInstances( SpringBootExceptionReporter.class, new Class[] { ConfigurableApplicationContext.class }, context); prepareContext(context, environment, listeners, applicationArguments, printedBanner); refreshContext(context); afterRefresh(context, applicationArguments); stopWatch.stop(); if (this.logStartupInfo) { new StartupInfoLogger(this.mainApplicationClass) .logStarted(getApplicationLog(), stopWatch); } listeners.started(context); callRunners(context, applicationArguments); } catch (Throwable ex) { handleRunFailure(context, listeners, exceptionReporters, ex); throw new IllegalStateException(ex); } listeners.running(context); return context; } 12345#### 4.1 headlessæ¨¡å¼è®¾ç½®ç³»ç»Ÿå±æ€§java.awt.headless private static final String SYSTEM_PROPERTY_JAVA_AWT_HEADLESS = &quot;java.awt.headless&quot;; private boolean headless = true; public ConfigurableApplicationContext run(String... args) { ... // è®¾ç½®headlessæ¨¡å¼ configureHeadlessProperty(); ... } private void configureHeadlessProperty() { System.setProperty(SYSTEM_PROPERTY_JAVA_AWT_HEADLESS, System.getProperty( SYSTEM_PROPERTY_JAVA_AWT_HEADLESS, Boolean.toString(this.headless))); } 123456#### 4.2 SpringApplicationRunListenersåœ¨SpringApplicationå¯¹è±¡çš„runæ–¹æ³•æ‰§è¡Œçš„ä¸åŒé˜¶æ®µï¼Œå»æ‰§è¡Œä¸€äº›æ“ä½œï¼Œå¹¶ä¸”è¿™äº›æ“ä½œæ˜¯å¯é…ç½®çš„ã€‚ åŠ è½½SpringApplicationRunListeneræ—¶ï¼Œä½¿ç”¨çš„æ˜¯è·ŸåŠ è½½ApplicationContextInitializerå’ŒApplicationListeneræ—¶ä¸€æ ·çš„æ–¹æ³•ï¼ŒåŠ è½½å†…å®¹å¦‚ä¸‹ï¼š Run Listenersorg.springframework.boot.SpringApplicationRunListener=\\ RunListeneræ˜¯åœ¨SpringApplicationå¯¹è±¡çš„runæ–¹æ³•æ‰§è¡Œåˆ°ä¸åŒçš„é˜¶æ®µæ—¶ï¼Œå‘å¸ƒç›¸åº”çš„eventç»™SpringApplicationå¯¹è±¡çš„æˆå‘˜å˜é‡listenersä¸­è®°å½•çš„äº‹ä»¶ç›‘å¬å™¨ã€‚org.springframework.boot.context.event.EventPublishingRunListener 1 public ConfigurableApplicationContext run(String... args) { ... SpringApplicationRunListeners listeners = getRunListeners(args); listeners.starting(); try { // æŠŠmainå‡½æ•°çš„argså‚æ•°å½“åšä¸€ä¸ªPropertySourceæ¥è§£æ ApplicationArguments applicationArguments = new DefaultApplicationArguments( args); // é…ç½®ç¯å¢ƒ:è¯»å–æ‰§è¡Œé…ç½®æ–‡ä»¶ï¼šprofilesä¸properties ConfigurableEnvironment environment = prepareEnvironment(listeners, applicationArguments); // è·³è¿‡ç‰¹å®šBeançš„é…ç½® configureIgnoreBeanInfo(environment); // banneræ‰“å° Banner printedBanner = printBanner(environment); // åˆ›å»ºä¼šè¯ context = createApplicationContext(); exceptionReporters = getSpringFactoriesInstances( SpringBootExceptionReporter.class, new Class[] { ConfigurableApplicationContext.class }, context); // å‡†å¤‡ä¼šè¯ prepareContext(context, environment, listeners, applicationArguments, printedBanner); // åˆ·æ–°ä¼šè¯ refreshContext(context); // åˆ·æ–°ä¼šè¯åæ‰§è¡Œ afterRefresh(context, applicationArguments); stopWatch.stop(); if (this.logStartupInfo) { new StartupInfoLogger(this.mainApplicationClass) .logStarted(getApplicationLog(), stopWatch); } listeners.started(context); callRunners(context, applicationArguments); } catch (Throwable ex) { handleRunFailure(context, listeners, exceptionReporters, ex); throw new IllegalStateException(ex); } listeners.running(context); return context; } private SpringApplicationRunListeners getRunListeners(String[] args) { Class&lt;?&gt;[] types = new Class&lt;?&gt;[] { SpringApplication.class, String[].class }; return new SpringApplicationRunListeners(logger, getSpringFactoriesInstances( SpringApplicationRunListener.class, types, this, args)); } ``` Tipsï¼šEnvironmentä»£è¡¨ç€ç¨‹åºè¿è¡Œçš„ç¯å¢ƒï¼Œä¸»è¦åŒ…å«äº†ä¸¤ç§ä¿¡æ¯ profilesï¼Œç”¨æ¥æè¿°å“ªäº›bean definitionsæ˜¯å¯ç”¨çš„ propertiesï¼Œç”¨æ¥æè¿°ç³»ç»Ÿçš„é…ç½®ï¼Œå…¶æ¥æºå¯èƒ½æ˜¯é…ç½®æ–‡ä»¶ã€JVMå±æ€§æ–‡ä»¶ã€æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡ç­‰ç­‰ å†é‡Œé¢çš„æ–¹æ³•å°±ä¸ç‚¹è¿›å»ä¸€ä¸€çœ‹äº†ï¼Œå¤§è‡´é…±ã€‚","link":"/2018/03/14/springboot-start/"},{"title":"æ ‘è“æ´¾çƒ§å½•ç³»ç»Ÿ","text":"çƒ§å½•å·¥å…· å®˜æ–¹å·¥å…·Raspberry Pi Imager é€šç”¨å·¥å…·etcher Windowsä¸‹çš„å·¥å…·Win32 DiskImage ç³»ç»Ÿ ä¸­æ–‡ç¤¾åŒº æ­¥éª¤ æ ¼å¼åŒ–SDå¡ï¼ŒRaspberry Pi Imagerä¸­é€‰Eraseé€‰é¡¹ çƒ§å½•ç›®æ ‡ç³»ç»Ÿ å°†è£…æœ‰æ“ä½œç³»ç»Ÿçš„SDå¡æ’å…¥è‡³æ ‘è“æ´¾ ä¸Šç”µå¼€æœº æœ‰å¤–æ¥å±å¹•å¯ä»¥çœ‹åˆ°å¯åŠ¨è¿‡ç¨‹ï¼Œæ²¡æœ‰åˆ™ç­‰å¾…å‡ åˆ†é’Ÿåsshè¿œç¨‹ç™»é™†æ ‘è“æ´¾æŸ¥çœ‹ æ ‘è“æ´¾è”ç½‘ 1.å¤–æ¥ç½‘çº¿ 2.ä¿®æ”¹ç½‘å¡é…ç½®ï¼Œç¼–è¾‘æ–‡ä»¶cd /etc/netplan/50-cloud-init.ymal 123456789network: version: 2 wifis: wlan0: dhcp4: true optional: true access-points: wifiåç§°: # åç§°æœ‰ç©ºæ ¼æ—¶ï¼Œç”¨åŒå¼•å· password: &quot;wifiå¯†ç &quot; ä½¿æ–‡ä»¶ç”Ÿæ•ˆ 12netplan generatenetplan apply Pingä¸€ä¸‹ç½‘å€çœ‹æ˜¯å¦è¿é€š æ‰‹åŠ¨å®‰è£…ä¸‹net-tools: apt-get install net-toolsï¼Œä½¿ç”¨å‘½ä»¤ifconfig -aæŸ¥çœ‹æœ¬æœºIPsshè¿æ¥æ ‘è“æ´¾ é‡åˆ°é—®é¢˜1.sshè¿æ¥æŠ¥é”™1234567@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!Someone could be eavesdropping on you right now (man-in-the-middle attack)!It is also possible that a host key has just been changed.... è§£å†³ï¼šæ¸…ç†ä¹‹å‰ä¿å­˜çš„è®¤è¯å¯†é’¥ 1234// æŸ¥çœ‹ssh-keygen -l -f ~/.ssh/known_hosts// æ¸…ç†192.169.1.1çš„è®¤è¯rsassh-keygen -R 192.169.1.1 ä½¿ç”¨sshkeyè¿æ¥æ ‘è“æ´¾ æœ¬åœ°ç”µè„‘ä¸Šç”Ÿæˆsshkey å°†å…¬é’¥å¤åˆ¶åˆ°æ ‘è“æ´¾ä¸Š cat ~/.ssh/pi_rsa.pub | ssh &lt;USERNAME&gt;@&lt;IP-ADDRESS&gt; 'cat &gt;&gt; .ssh/authorized_keysâ€™ æœ¬åœ°ç”µè„‘ç”¨sshkeyè¿æ¥æ ‘è“æ´¾ ssh -i ~/.ssh/pi_rsa &lt;USERNAME&gt;@&lt;IP-ADDRESS&gt;","link":"/2020/06/18/rasp-os/"},{"title":"æ ‘è“æ´¾Picoçš„å°åº”ç”¨","text":"å¼€å§‹çš„è®¾æƒ³picoå‡ºæ¥ä¸€æ®µæ—¶é—´äº†ï¼Œè¿™ä¸ªåªè¦4åˆ€çš„å°å¼€å‘æ¿è¢«å„ç¡¬ä»¶è¥é”€å·æ§å¾—å¾ˆé«˜ã€‚æœ¬æ¥ä¸ä»¥ä¸ºæ„ï¼Œä½†åœ¨è‚åŠ¨æ£®çš„æŸä¸ªä¸‹åˆï¼Œçœ‹åˆ°å®¶é—¨å£çš„é‚®ç®±mail_boxçªç„¶è§‰å¾—å¾ˆå¯çˆ±ï¼Œå°±æƒ³çœ‹çœ‹èƒ½ä¸èƒ½ç”¨picoå®ç°ä¸€ä¸ªæˆå“ç‰ˆã€‚æƒ³å½“ç„¶çš„è®¤ä¸ºåªè¦æœ‰wifiæ¨¡å—+æ­¥è¿›ç”µæœºæ¨¡å—å°±èƒ½æå®šã€‚äºæ˜¯ï¼Œå¼€å§‹äº†picoçš„å­¦ä¹ ã€‚ å¼€æœº æŒ‰ä½æ¿ä¸Šçš„BOOTSELé”®ï¼Œè¿æ¥micro usbè‡³ç”µè„‘ ä»å®˜ç½‘ä¸Šä¸‹è½½é€‚åˆpicoç”¨çš„micropythonå›ºä»¶ï¼Œæ‹–è‡³picoä¸­ï¼Œä¸Šä¼ å®Œæ¯•åpicoä¼šè‡ªåŠ¨ä»ç”µè„‘å¼¹å‡º å†å°†picoç›´æ¥è¿æ¥è‡³ç”µè„‘ï¼Œä¸ç”¨æŒ‰BOOTSELé”® ä½¿ç”¨Thonnyåœ¨picoä¸­ç¼–ç¨‹ï¼ŒThonnyä¼šè‡ªåŠ¨è¯†åˆ«picoè§£é‡Šå™¨ï¼Œè¯¦è§Thonnyçª—å£ï¼šå·¥å…·-è®¾ç½®-è§£é‡Šå™¨ æŸ¥çœ‹ç³»ç»Ÿä¸­çš„åŒ… 12import oshelp(â€œmodulesâ€) ç‚¹äº®Picoä¸Šçš„LED12345678910111213141516import osfrom machine import Pinimport time# LEDç¯çš„pinè„šl=Pin(25,Pin.OUT)# å¸¸äº®# l.high()# é—ªçƒwhile True: l.value(1) time.sleep(1) l.value(0) time.sleep(1) å°†Picoè”ç½‘å‡†å¤‡ç¡¬ä»¶ï¼š é¢åŒ…ç‰ˆ å…¬æ¯è·³çº¿ Wifiæ¨¡å— WSP01 æ­¥éª¤ï¼š å…ˆå°†ä¸‹åˆ—ä¾èµ–ä»£ç ä¸Šä¼ è‡³picoï¼Œå‘½åwifiat.py 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879import utimeclass at(object): def __init__(self,uart): self.uart=uart def sendCMD_waitResp(self,cmd, timeout=2000): print(&quot;CMD: &quot; + cmd) self.uart.write(cmd.encode('utf-8')) return self.waitResp(timeout) def waitResp(self,timeout=2000): prvMills = utime.ticks_ms() resp = b&quot;&quot; while (utime.ticks_ms()-prvMills)&lt;timeout: if self.uart.any(): resp = b&quot;&quot;.join([resp, self.uart.read(1)]) print(resp) return resp def sendCMD_waitRespLine(self,cmd, timeout=2000): print(&quot;CMD: &quot; + cmd) self.uart.write(cmd.encode('utf-8')) return self.waitRespLine(timeout) def waitRespLine(self,timeout=2000): cl=[] prvMills = utime.ticks_ms() while (utime.ticks_ms()-prvMills)&lt;timeout: if self.uart.any(): li=self.uart.readline() print(li) cl.append(li) return cl def restart(self): self.sendCMD_waitResp('+++') return self.sendCMD_waitResp(&quot;AT+RST\\r\\n&quot;) def connect(self,name,password): self.sendCMD_waitResp('AT+CWMODE=1\\r\\n') cmd='AT+CWJAP=&quot;%s&quot;,&quot;%s&quot;\\r\\n' % (name,password) return self.sendCMD_waitResp(cmd) def netinfo(self): return self.sendCMD_waitResp(&quot;AT+CIFSR\\r\\n&quot;) def info(self): return self.sendCMD_waitResp(&quot;AT+GMR\\r\\n&quot;) def restore(self): return self.sendCMD_waitResp(&quot;AT+RESTORE\\r\\n&quot;) def ping(self,doip): return self.sendCMD_waitResp('AT+PING=&quot;%s&quot;\\r\\n' % (doip,)) def disconnect(self): return self.sendCMD_waitResp(&quot;AT+CWQAP\\r\\n&quot;) def http(self,url,method=&quot;GET&quot;,ua=1,content=1,data='',timeout=6): self.sendCMD_waitResp(&quot;+++&quot;) typ,edx,domain,rel=url.split(&quot;/&quot;,3) if &quot;HTTP&quot; == typ[0:-1].upper(): cs='AT+CIPSTART=&quot;TCP&quot;,&quot;%s&quot;,80\\r\\n' % (domain,) else: self.sendCMD_waitResp(&quot;AT+CIPSSLSIZE=4096\\r\\n&quot;) cs='AT+CIPSTART=&quot;SSL&quot;,&quot;%s&quot;,443\\r\\n' % (domain,) self.sendCMD_waitResp(cs) self.sendCMD_waitResp('AT+CIPMODE=1\\r\\n') self.sendCMD_waitResp('AT+CIPSEND\\r\\n') if ua==1: ua=&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/14.0.835.163 Safari/535.1&quot; elif ua==2: ua=&quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:6.0) Gecko/20100101 Firefox/6.0&quot; elif ua==3: ua=&quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.111 Safari/537.36&quot; elif ua==4: ua=&quot;Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1&quot; if content==1: content=&quot;text/html;charset=utf-8&quot; elif content==2: content=&quot;text/xml&quot; elif content==3: content=&quot;application/json&quot; elif content==4: content=&quot;multipart/form-data&quot; elif content==5: content=&quot;application/x-www-form-urlencoded&quot; c=&quot;%s %s HTTP/1.1\\r\\nHOST:%s \\r\\nContent-Type: %s\\r\\nUser-Agent:%s \\r\\n \\n %s \\r\\n\\r\\n &quot; % (method,url,domain,content,ua,data) return self.sendCMD_waitRespLine(c,1000*timeout) è¿æ¥picoä¸esp01 è¿æ¥ç”µè„‘ï¼Œæ­¤æ—¶esp01çš„çº¢è‰²ledç¯ä¼šå¸¸äº® åœ¨Thonnyçš„shellä¸­è¾“å…¥ä»£ç  123456789101112131415# å›ºä»¶æ¨¡å—from machine import UART# å¯¼å…¥ä¾èµ–wifiat.pyfrom wifiat import atuart=UART(0,115200)AT=at(uart)# è¿æ¥wifiAT.connect(â€œWi-Fiåâ€,â€Wi-Fiå¯†ç â€)# æŸ¥çœ‹ä¿¡æ¯AT.info()# æŸ¥çœ‹è”ç½‘ä¿¡æ¯AT.netinfo() æŸ¥çœ‹è”ç½‘ä¿¡æ¯AT.netinfo()å¦‚ä¸‹æ˜¾ç¤ºåˆ™è¿æ¥æˆåŠŸ 1234CMD: AT+CIFSRb'WIFI CONNECTED\\r\\nWIFI GOT IP\\r\\n\\r\\nOAT+CIFSR\\r\\r\\n+CIFSR:STAIP,&quot;192.168.3.32&quot;\\r\\n+CIFSR:STAMAC,&quot;e8:db:84:95:94:33&quot;\\r\\n\\r\\nOK\\r\\n'b'WIFI CONNECTED\\r\\nWIFI GOT IP\\r\\n\\r\\nOAT+CIFSR\\r\\r\\n+CIFSR:STAIP,&quot;192.168.3.32&quot;\\r\\n+CIFSR:STAMAC,&quot;e8:db:84:95:94:33&quot;\\r\\n\\r\\nOK\\r\\n' GETè¯·æ±‚ 123resp=AT.http(â€œhttp://ç½‘å€/getâ€)AT.http(&quot;http://httpbin.org/get&quot;) POSTè¯·æ±‚ 12resp=AT.http(â€œhttp://ç½‘å€/postâ€,mothod=â€œPOSTâ€,data='æ•°æ®')AT.http(&quot;http://httpbin.org/post&quot;,method=&quot;POST&quot;,data='{&quot;a&quot;:1,&quot;b&quot;:2}') respå¯è¿”å›å“åº”åˆ—è¡¨ å‚è€ƒï¼šé‚ªæ¶çš„èƒ–æ¬¡èŒ","link":"/2021/03/11/pico-toy/"}],"tags":[{"name":"server","slug":"server","link":"/tags/server/"},{"name":"ubuntu","slug":"ubuntu","link":"/tags/ubuntu/"},{"name":"tensorflow","slug":"tensorflow","link":"/tags/tensorflow/"},{"name":"cron","slug":"cron","link":"/tags/cron/"},{"name":"git","slug":"git","link":"/tags/git/"},{"name":"config","slug":"config","link":"/tags/config/"},{"name":"mac","slug":"mac","link":"/tags/mac/"},{"name":"profile","slug":"profile","link":"/tags/profile/"},{"name":"bash_profile","slug":"bash-profile","link":"/tags/bash-profile/"},{"name":"nginx","slug":"nginx","link":"/tags/nginx/"},{"name":"hexo","slug":"hexo","link":"/tags/hexo/"},{"name":"https","slug":"https","link":"/tags/https/"},{"name":"wechat","slug":"wechat","link":"/tags/wechat/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","link":"/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"arduino","slug":"arduino","link":"/tags/arduino/"},{"name":"version","slug":"version","link":"/tags/version/"},{"name":"springboot","slug":"springboot","link":"/tags/springboot/"},{"name":"Rasperry Pi","slug":"Rasperry-Pi","link":"/tags/Rasperry-Pi/"},{"name":"pico","slug":"pico","link":"/tags/pico/"}],"categories":[{"name":"config","slug":"config","link":"/categories/config/"},{"name":"note","slug":"note","link":"/categories/note/"}]}